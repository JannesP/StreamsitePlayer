<!DOCTYPE html>

<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

        <script type="text/javascript">
            window.onerror = function(msg, file, line){
                window.external.Log("error: " + msg + "\n" + "file: " + file + "\n" + "line: " + line);
            }
        </script>

		<script type="text/javascript" src="jwplayer/jwplayer.js"></script>
		<script type="text/javascript">jwplayer.key="--key--";</script>
	</head>

	<body style="background-color: black;">
		<div id="myvideo">Loading the player...</div>
		<script type="text/javascript">
			jwplayer("myvideo").setup({
				provider: "http",
				--insertion--,
				width: "100%",
				aspectratio: "16:9",
                autostart: true
			});
		</script>
		
		<script type="text/javascript">
			var isOnReadyFired = false;
			playerInstance = jwplayer("myvideo");
			playerInstance.on('time', OnPlaylocationChanged);
			playerInstance.on('complete', OnComplete);
			playerInstance.on('fullscreen', OnFullscreenChanged);
			playerInstance.on('mute', OnMuteChange);
			playerInstance.on('volume', OnVolumeChange);
			playerInstance.on('error', OnError);
			playerInstance.on('setupError', OnSetupError);

			function OnVolumeChange(event) {
			    window.external.OnVolumeChange(event.volume);
			}

			function OnMuteChange(event) {
			    window.external.OnMuteChange(event.mute);
			}

			function OnReady() {
			    window.external.OnReady();
			}

			function IsPlaying() {
				return (playerInstance.getState() == "playing");
			}
			
			function GetPosition() {
			    return playerInstance.getPosition();
			}

			function SetPosition(position) {
			    return playerInstance.seek(position);
			}

			function Maximized() {
				return playerInstance.getFullscreen();
			}
			
			function Play() {
				playerInstance.play(true);
			}
			
			function Pause() {
				playerInstance.pause(true);
			}

			function SetMute(mute) {
			    playerInstance.setMute(mute);
			}

			function IsMuted() {
			    return playerInstance.getMute();
			}

			function SetVolume(volume) {
			    return playerInstance.setVolume(volume);
			}

			function GetVolume() {
			    return playerInstance.getVolume();
			}
			
			function PlayPause() {
				playerInstance.play();
			}

			function GetLength() {
			    return playerInstance.getDuration();
			}
			
			function OnPlaylocationChanged(event) {
				if (!isOnReadyFired && playerInstance.getDuration() != 0) {
					isOnReadyFired = true;
					OnReady();
				}
				window.external.OnPlaylocationChanged(event.position * 1000, (event.duration - event.position) * 1000, event.duration * 1000);
			}
			
			function OnComplete(event) {
				window.external.OnPlaybackComplete();
			}
			
			function OnFullscreenChanged(event) {
				window.external.OnFullscreenChanged(event.fullscreen);
			}

			function OnError(event) {
			    window.external.OnError(event.message);
			}

			function OnSetupError(event) {
			    window.external.OnSetupError(event.message);
			}
			
			function ClickOnFullscreen() {
				elements = document.getElementsByClassName("jw-icon-fullscreen");
				for (i = 0; i < elements.length; i++) {
					var mousedown = document.createEvent("MouseEvent");
					mousedown.initMouseEvent('mousedown', true, false, window, {}, 0, 0, 0, 0, false, false, false, false, 0, elements[i]);
					var mouseup = document.createEvent("MouseEvent");
					mouseup.initMouseEvent('mouseup', true, false, window, {}, 0, 0, 0, 0, false, false, false, false, 0, elements[i]);
				    window.external.Log("Fireing mousedown event on: " + elements[i].outerHTML);
					elements[i].dispatchEvent(mousedown);
					window.external.Log("Fireing mouseup event on: " + elements[i].outerHTML);
					elements[i].dispatchEvent(mouseup);
				}
			}
		</script>
		
	</body>
</html>