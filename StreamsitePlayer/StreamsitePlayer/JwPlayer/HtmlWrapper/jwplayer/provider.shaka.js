webpackJsonpjwplayer([2],{95:function(e,t,n){var i,r;i=[n(45),n(62),n(65),n(64),n(66),n(96)],r=function(e,t,n,i,r,o){function a(e){var t=e/1e3;return Math.floor(t).toLocaleString()+" kbps"}function s(s){function l(){this.state===n.LOADING&&this.setState(n.PLAYING)}function u(e,t){switch(t.schemeIdUri){case"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":case"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":var n="com.widevine.alpha",i=e.widevine.url;return i||(console.log("No licensing server specified for widevine. Defaulting to proxy."),i="http://widevine-proxy.appspot.com/proxy"),new o.player.DrmSchemeInfo(n,i,!1,null,null);default:return console.log("Unrecognized scheme: "+t.schemeIdUri),null}}function c(e){console.error(e);var t="Unknown playback error";S.sendEvent(i.JWPLAYER_MEDIA_ERROR,{message:"Error playing file:"+t})}function d(){return this.levels}function h(){return this.currentQuality}function f(t){this.setState(n.LOADING);var i=t.sources[0].file,r=t.sources[0].drm||{},a=t.startTime,s=new o.util.EWMABandwidthEstimator,l=e.partial(u,r),c=new o.player.DashVideoSource(i,l,s),d=R.load(c);d.then(p.bind(this)),t.starttime&&d.then(function(){this.seek(a)}.bind(this))}function p(){S.sendEvent(i.JWPLAYER_MEDIA_BUFFER_FULL);var t=R.getVideoTracks();t.length>1&&(this.currentQuality=0,this.levels=e.map(t,function(e){return{label:a(e.bandwidth),level_id:e.id}}),this.levels.unshift({label:"Auto",level_id:"auto"}),S.sendEvent(i.JWPLAYER_MEDIA_LEVELS,{levels:this.levels,currentQuality:this.currentQuality}))}function g(){S.sendEvent(i.JWPLAYER_MEDIA_META,{duration:_.duration,height:_.videoHeight,width:_.videoWidth})}function m(e){_.muted=e}function A(){_.pause(),this.setState(n.PAUSED)}function y(){_.play(),this.setState(n.BUFFERING),this.setVisibility(!0)}function v(e){_.currentTime=e,this.sendEvent(i.JWPLAYER_MEDIA_SEEK,{position:_.currentTime,offset:e})}function E(e){e=!!e,e?t.style(C,{visibility:"visible",opacity:1}):t.style(C,{visibility:"",opacity:0})}function w(){R.unload(),C===_.parentNode&&C.removeChild(_)}function b(){_.pause(),this.setState(n.IDLE)}function M(e){C=e,C.appendChild(_)}function P(){return C}function j(e){if(e=parseInt(e,10),!(this.currentQuality===e||0>e||e>=this.levels.length)){if(0===e)R.enableAdaptation(!0);else{var t=this.levels[e].level_id;R.enableAdaptation(!1),this.setState(n.LOADING),R.selectVideoTrack(t)}this.currentQuality=e,this.sendEvent(i.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:this.currentQuality,levels:this.levels})}}function T(){var e=_.currentTime;Math.abs(e-this.position)<1&&S.state===n.BUFFERING&&S.setState(n.PLAYING),this.position=e,S.sendEvent(i.JWPLAYER_MEDIA_TIME,{position:e,duration:_.duration,quality:1}),e>_.duration-.1&&_.duration>1&&(S.setState(n.IDLE),S.sendEvent(i.JWPLAYER_MEDIA_COMPLETE))}function k(e){_.volume=e/100}var C,L=document.getElementById(s),_=L?L.querySelector("video"):void 0;_=_||document.createElement("video");var R=new o.player.Player(_),S=this;this.position=0,this.levels=[],this.currentQuality=-1,e.extend(this,new r("shaka"),{load:f,mute:m,pause:A,getQualityLevels:d.bind(this),getCurrentQuality:h.bind(this),play:y,seek:v,remove:w,setContainer:M,getContainer:P,setCurrentQuality:j.bind(this),setVisibility:E,stop:b,volume:k,supportsFullscreen:e.constant(!0),getName:e.constant({name:"shaka"})}),R.addEventListener("error",c),_.addEventListener("loadedmetadata",g.bind(this)),_.addEventListener("timeupdate",T.bind(this)),_.addEventListener("playing",l.bind(this))}o.polyfill.installAll();var l=["ads","enterprise","premium"];return s.supports=function(t,n){if(t.drm&&"ads"!==n&&"enterprise"!==n)return!1;var i=!1;return t.file?"dash"===t.type||"mpd"===t.type?i=!0:(t.file.indexOf(".mpd")>-1||t.file.indexOf("mpd-time-csf")>-1)&&(i=!0):i=!0,window.MediaSource||(i=!1),i&&e.contains(l,n)},{register:function(e){e.api.registerProvider(s)}}}.apply(t,i),!(void 0!==r&&(e.exports=r))},96:function(e,t,n){var i;!function(){var r={};(function(e){function t(e,t){var n=e.split("."),i=ci;n[0]in i||!i.execScript||i.execScript("var "+n[0]);for(var r;n.length&&(r=n.shift());)n.length||void 0===t?i=i[r]?i[r]:i[r]={}:i[r]=t}function n(e,t){function n(){}n.prototype=t.prototype,e.ye=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ve=function(e,n,i){return t.prototype[n].apply(e,Array.prototype.slice.call(arguments,2))}}function i(){}function r(e){hi[e]={rb:di(),end:NaN}}function o(e){(e=hi[e])&&(e.end=di())}function a(e){return(e=hi[e])&&e.end?e.end-e.rb:NaN}function s(e,t,n){this.id=e,this.bandwidth=t||0,this.lang=n||"unknown",this.active=!1}function l(e,t){this.id=e,this.lang=t||"unknown",this.enabled=this.active=!1}function u(e,t,n,i){this.id=e,this.bandwidth=t||0,this.width=n||0,this.height=i||0,this.active=!1}function c(e,t){var n=e.width*e.height,i=t.width*t.height;return i>n?-1:n>i?1:e.bandwidth<t.bandwidth?-1:e.bandwidth>t.bandwidth?1:0}function d(){var t="CustomEvent"in e;if(t)try{new CustomEvent("")}catch(n){t=!1}t||(e.CustomEvent=h)}function h(e,t){var n=document.createEvent("CustomEvent"),i=t||{bubbles:!1,cancelable:!1,detail:null};return n.initCustomEvent(e,!!i.bubbles,!!i.cancelable,i.detail),n}function f(){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitExitFullscreen,"fullscreenElement"in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}}),document.addEventListener("webkitfullscreenchange",p),document.addEventListener("webkitfullscreenerror",p),document.addEventListener("mozfullscreenchange",p),document.addEventListener("mozfullscreenerror",p),document.addEventListener("MSFullscreenChange",p),document.addEventListener("MSFullscreenError",p)}function p(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),t=new Event(t,e);e.target.dispatchEvent(t)}function g(){return Promise.reject(Error("The key system specified is not supported."))}function m(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function A(){throw new TypeError("Illegal constructor.")}function y(){throw new TypeError("Illegal constructor.")}function v(){var e=HTMLVideoElement.prototype;e.getVideoPlaybackQuality||(e.getVideoPlaybackQuality=function(){return"webkitDroppedFrameCount"in this?{corruptedVideoFrames:0,droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,creationTime:null,totalFrameDelay:null}:null})}function E(e,t){for(var n={},i=0;i<e.length;++i){var r=t?t(e[i]):e[i].toString();n[r]=e[i]}var o,i=[];for(o in n)i.push(n[o]);return i}function w(e,t){this.i=e,this.vc=t==pi,this.h=0}function b(e){var t=e.i.getUint8(e.h);return e.h+=1,t}function M(e){var t=e.i.getUint32(e.h,e.vc);return e.h+=4,t}function P(e){var t,n;if(e.vc?(t=e.i.getUint32(e.h,!0),n=e.i.getUint32(e.h+4,!0)):(n=e.i.getUint32(e.h,!1),t=e.i.getUint32(e.h+4,!1)),n>2097151)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");return e.h+=8,n*Math.pow(2,32)+t}function j(e){if(e.h+16>e.i.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var t=new Uint8Array(e.i.buffer,e.h,16);return e.h+=16,t}function T(e,t){if(e.h+t>e.i.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");e.h+=t}function k(e){this.i=e,this.Pa=new w(e,0)}function C(e){var t;if(t=L(e),7<t.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var n=0,i=0;i<t.length;i++)n=256*n+t[i];t=n,n=L(e);e:{for(i=0;i<gi.length;i++)if(te(n,gi[i])){i=!0;break e}i=!1}if(i)throw new RangeError("EbmlParser: Element cannot contain dynamically sized data.");if(8==n.length&&224&n[1])throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var i=n[0]&(1<<8-n.length)-1,r=1;r<n.length;r++)i=256*i+n[r];return n=i,n=e.Pa.h+n<=e.i.byteLength?n:e.i.byteLength-e.Pa.h,i=new DataView(e.i.buffer,e.i.byteOffset+e.Pa.h,n),T(e.Pa,n),new _(t,i)}function L(e){var t,n=b(e.Pa);for(t=1;8>=t&&!(n&1<<8-t);t++);if(t>8)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var i=new Uint8Array(t);for(i[0]=n,n=1;t>n;n++)i[n]=b(e.Pa);return i}function _(e,t){this.id=e,this.i=t}function R(e){if(8<e.i.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==e.i.byteLength&&224&e.i.getUint8(0))throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var t=0,n=0;n<e.i.byteLength;n++)var i=e.i.getUint8(n),t=256*t+i;return t}function S(e){this.Nc=Math.exp(Math.log(.5)/e),this.gc=this.lc=0}function D(e){return e.lc/(1-Math.pow(e.Nc,e.gc))}function I(e){var t,n=new CustomEvent(e.type,{detail:e.detail,bubbles:!!e.bubbles});for(t in e)t in n||(n[t]=e[t]);return n}function N(e){return new CustomEvent("error",{detail:e,bubbles:!0})}function x(e,t,n){return B(t),B(n),n==t||e>=mi&&n==t.split("-")[0]||e>=Ai&&n.split("-")[0]==t.split("-")[0]?!0:!1}function B(e){e=e.toLowerCase().split("-");var t=yi[e[0]];return t&&(e[0]=t),e.join("-")}function O(){this.aa={}}function F(e){var t,n=[];for(t in e.aa)n.push.apply(n,e.aa[t]);return n}function U(){this.Va=new O}function Y(e,t,n,i){t=new H(t,n,i),e.Va.push(n,t)}function Q(e){for(var t=F(e.Va),n=0;n<t.length;++n)t[n].Gb();e.Va.clear()}function H(e,t,n){this.target=e,this.type=t,this.bd=n,this.target.addEventListener(t,n,!1)}function G(e){this.uc=new O,this.parent=e}function V(e,t){t.currentTarget=e;for(var n=e.uc.get(t.type)||[],i=0;i<n.length;++i){var r=n[i];try{r.handleEvent?r.handleEvent(t):r.call(e,t)}catch(o){}}return e.parent&&t.bubbles&&V(e.parent,t),t.defaultPrevented}function q(){G.call(this,null),this.mc=new S(3),this.nd=new S(10),this.Kd=50,this.xd=5e5,this.Ld=.5,this.Jd=65536,this.Zc=0}function K(){var e,t,n=new Promise(function(n,i){e=n,t=i});return n.resolve=e,n.reject=t,n}function W(){this.Fb=new K,this.Db=!1,this.ea=null,this.Ba=[],this.Ea=null}function J(e,t){var n,i=e.Ba[0](t);i?(n=i[0],e.Ea=i[1]):(n=Promise.resolve(),e.Ea=null),n.then(function(e){this.ea?(this.Ba=[],this.Ea=null,this.ea.resolve(),this.ea=null):(this.Ba.shift(),this.Ba.length?J(this,e):(this.Fb.resolve(e),this.Ea=null))}.bind(e))["catch"](function(e){this.Fb.reject(e),this.Ba=[],this.Ea=null,this.ea&&(this.ea.resolve(),this.ea=null)}.bind(e))}function z(e,t){return t.bind(e)}function X(e){return String.fromCharCode.apply(null,e)}function Z(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function $(t){return Z(e.atob(t.replace(/-/g,"+").replace(/_/g,"/")))}function ee(e){for(var t="",n=0;n<e.length;++n){var i=e[n].toString(16);1==i.length&&(i="0"+i),t+=i}return t}function te(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!=t[n])return!1;return!0}function ne(e,t,n,i,r){this.keySystem=e,this.ad=t,this.withCredentials=n,this.Ka=[],this.$c=r,i&&this.Ka.push(i)}function ie(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.maxHeight=null}function re(){return new ne("","",!1,null,null)}function oe(e,t){var n=new ne(e.keySystem,e.ad,e.withCredentials,null,e.$c);return n.Ka=E(e.Ka.concat(t.Ka),function(e){return Array.prototype.join.apply(e.initData)}),n}function ae(e,t){try{var n=new le(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function se(e){var t=this.mediaKeys;return t&&t!=e&&ce(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&ce(e,this),Promise.resolve()}function le(e,t){this.$a=this.keySystem=e;var n=!0;"org.w3.clearkey"==e&&(this.$a="webkit-org.w3.clearkey",n=!1);var i,r=!1;i=document.getElementsByTagName("video"),i=i.length?i[0]:document.createElement("video");for(var o=0;o<t.length;++o){var a=t[o],s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:a.initDataTypes},l=!1;if(a.audioCapabilities)for(var u=0;u<a.audioCapabilities.length;++u){var c=a.audioCapabilities[u];c.contentType&&(l=!0,i.canPlayType(c.contentType.split(";")[0],this.$a)&&(s.audioCapabilities.push(c),r=!0))}if(a.videoCapabilities)for(u=0;u<a.videoCapabilities.length;++u)c=a.videoCapabilities[u],c.contentType&&(l=!0,i.canPlayType(c.contentType,this.$a)&&(s.videoCapabilities.push(c),r=!0));if(l||(r=i.canPlayType("video/mp4",this.$a)||i.canPlayType("video/webm",this.$a)),"required"==a.persistentState&&(n?s.persistentState="required":r=!1),r)return void(this.wd=s)}throw Error("None of the requested configurations were supported.")}function ue(e){this.Ma=e,this.za=null,this.j=new U,this.ed=[],this.ld={}}function ce(e,t){e.za=t,Q(e.j),t&&(Y(e.j,t,"webkitneedkey",e.fe.bind(e)),Y(e.j,t,"webkitkeymessage",e.ee.bind(e)),Y(e.j,t,"webkitkeyadded",e.ce.bind(e)),Y(e.j,t,"webkitkeyerror",e.de.bind(e)))}function de(e,t){var n=e.ld[t];return n?n:(n=e.ed.shift())?(n.sessionId=t,e.ld[t]=n):null}function he(e,t,n){G.call(this,null),this.za=e,this.Yc=!1,this.O=this.Y=null,this.Ma=t,this.Sa=n,this.sessionId="",this.expiration=NaN,this.closed=new K,this.keyStatuses=new me}function fe(e,t,n){if(e.Yc)return Promise.reject(Error("The session is already initialized."));e.Yc=!0;try{var i;if("persistent-license"==e.Sa)if(n)i=Z("LOAD_SESSION|"+n);else{var r=new Uint8Array(t);i=Z("PERSISTENT|"+X(r))}else i=new Uint8Array(t)}catch(o){return Promise.reject(o)}e.Y=new K;try{e.za.webkitGenerateKeyRequest(e.Ma,i)}catch(a){if("InvalidStateError"!=a.name)return e.Y=null,Promise.reject(a);setTimeout(function(){try{this.za.webkitGenerateKeyRequest(this.Ma,i)}catch(e){this.Y.reject(e),this.Y=null}}.bind(e),10)}return e.Y}function pe(e,t){var n=e.keyStatuses;n.size=void 0==t?0:1,n.Da=t,n=I({type:"keystatuseschange"}),e.dispatchEvent(n)}function ge(e){this.td=e,this.Xc=0}function me(){this.size=0,this.Da=void 0}function Ae(){Navigator.prototype.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(Navigator.prototype.requestMediaKeySystemAccess=ae,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=se,e.MediaKeys=ue,e.MediaKeySystemAccess=le):(Navigator.prototype.requestMediaKeySystemAccess=g,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=m,e.MediaKeys=A,e.MediaKeySystemAccess=y))}function ye(e){this.systemIds=[],this.cencKeyIds=[],e=new w(new DataView(e.buffer),0);try{for(;e.Ia();){var t=e.h,n=M(e),i=M(e);if(1==n?n=P(e):0==n&&(n=e.i.byteLength-t),1886614376!=i)T(e,n-(e.h-t));else{var r=b(e);if(r>1)T(e,n-(e.h-t));else{T(e,3);var o=ee(j(e)),a=[];if(r>0)for(var s=M(e),l=0;s>l;++l){var u=ee(j(e));a.push(u)}var c=M(e);T(e,c),this.cencKeyIds.push.apply(this.cencKeyIds,a),this.systemIds.push(o),e.h!=t+n&&T(e,n-(e.h-t))}}}}catch(d){}}function ve(e){var t;e instanceof ve?(Ee(this,e.Aa),this.Ta=e.Ta,this.oa=e.oa,we(this,e.hb),this.ia=e.ia,be(this,e.Oa.clone()),this.Ha=e.Ha):e&&(t=String(e).match(Ei))?(Ee(this,t[1]||"",!0),this.Ta=Me(t[2]||""),this.oa=Me(t[3]||"",!0),we(this,t[4]),this.ia=Me(t[5]||"",!0),be(this,t[6]||"",!0),this.Ha=Me(t[7]||"")):this.Oa=new Te(null)}function Ee(e,t,n){e.Aa=n?Me(t,!0):t,e.Aa&&(e.Aa=e.Aa.replace(/:$/,""))}function we(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.hb=t}else e.hb=null}function be(e,t,n){t instanceof Te?e.Oa=t:(n||(t=Pe(t,Pi)),e.Oa=new Te(t))}function Me(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Pe(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,je),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function je(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}function Te(e){this.wa=e||null}function ke(){this.id=null,this.type="static",this.sa=this.d=null,this.Q=5,this.nb=this.Kb=this.xb=null,this.Ic=1,this.w=[]}function Ce(){this.B=this.I=this.M=this.d=this.duration=this.start=this.id=null,this.ua=[]}function Le(){this.B=this.I=this.M=this.d=this.W=this.l=this.height=this.width=this.contentType=this.lang=this.id=null,this.ma=[],this.S=[]}function _e(){this.value=null}function Re(){this.contentType=this.lang=this.id=null}function Se(){this.B=this.I=this.M=this.d=this.W=this.l=this.height=this.width=this.bandwidth=this.lang=this.id=null,this.ma=[],this.vb=!1}function De(){this.value=this.schemeIdUri=null,this.children=[],this.pssh=null}function Ie(){this.parsedPssh=this.psshBox=null}function Ne(){this.url=null}function xe(){this.d=null,this.m=1,this.Z=this.Qa=this.ya=this.t=null}function Be(){this.R=this.url=null}function Oe(){this.R=this.url=null}function Fe(){this.d=null,this.m=1,this.A=this.t=null,this.U=1,this.Z=null,this.Ra=[]}function Ue(){this.cb=this.K=null}function Ye(){this.m=1,this.A=this.t=null,this.U=1,this.ob=this.qa=this.Ja=this.ga=null}function Qe(){this.ec=[]}function He(){this.repeat=this.duration=this.startTime=null}function Ge(e,t){this.rb=e,this.end=t}function Ve(e,t){var n=t?new ve(t):null;return e?n?e.resolve(n):e:n}function qe(e,t,n){var i=Xe(n);return(t=We(t,n.constructor.TAG_NAME))&&i.parse(e,t),i}function Ke(e,t,n){var i=null;return(t=We(t,n.TAG_NAME))&&(i=new n,i.parse(e,t)),i}function We(e,t){for(var n=null,i=0;i<e.childNodes.length;i++)if(e.childNodes[i].tagName==t){if(n)return null;n=e.childNodes[i]}return n}function Je(e,t,n){for(var i=[],r=0;r<t.childNodes.length;r++)if(t.childNodes[r].tagName==n.TAG_NAME){var o=new n;o.parse.call(o,e,t.childNodes[r]),i.push(o)}return i}function ze(e){return e=e.firstChild,e.nodeType!=Node.TEXT_NODE?null:e.nodeValue}function Xe(e){return e?e.clone():null}function Ze(e,t,n,i){return e=n(e.getAttribute(t)),null!=e?e:void 0!==i?i:null}function $e(e){return e?(e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null}function et(t){if(!t)return null;var n=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(t);if(!n)return null;t=0;var i=it(n[1]);return i&&(t+=31536e3*i),(i=it(n[2]))&&(t+=2592e3*i),(i=it(n[3]))&&(t+=86400*i),(i=it(n[4]))&&(t+=3600*i),(i=it(n[5]))&&(t+=60*i),n=e.parseFloat(n[6]),(n=isNaN(n)?null:n)&&(t+=n),t}function tt(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=it(t[1]),null==e?null:(t=it(t[2]),null==t?null:new Ge(e,t))):null}function nt(t){return t=e.parseInt(t,10),t>0?t:null}function it(t){return t=e.parseInt(t,10),t>=0?t:null}function rt(e){return e}function ot(e,t,n,i,r,o){this.id=e,this.startTime=t,this.endTime=n,this.Ca=i,this.Ya=r,this.url=o}function at(e,t,n){return new ot(e.id,t,n,e.Ca,e.Ya,e.url)}function st(e){this.eb=e}function lt(e){this.zb=e}function ut(e){this.g=e,this.pb=0,ft(this)}function ct(e){if(0==e.g.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return e.g[e.g.length-1]}function dt(e,t,n){var i=e.find(t);if(0>i)return null;for(var r=[];i<e.g.length;i++){r.push(e.g[i]);var o=e.g[i].endTime;if(!o||o>t+n)break}return new lt(r)}function ht(e,t){return e.map(function(e){return at(e,e.startTime+t,null!=e.endTime?e.endTime+t:null)})}function ft(e){var t,n=e.g;i(n.every(function(e,i){var r=!0;return 0!=i&&(r=e.startTime>=t.startTime&&e.startTime<=t.endTime&&(e.endTime&&e.endTime>=t.endTime||i==n.length-1)),t=e,r})),i(E(n,function(e){return e.id}).length==n.length)}function pt(e){this.eb=e}function gt(e){this.url=e,this.n=new mt,this.Bb=this.od=this.Pc=0,this.o=null,this.ta=new K,this.J=null}function mt(){this.body=null,this.Sb=1,this.Qc=1e3,this.je=2,this.ke=.5,this.ie=0,this.method="GET",this.responseType="arraybuffer",this.Dc={},this.qd=this.withCredentials=!1}function At(e){yt(e),e.n.body=null,e.ta=null,e.J=null}function yt(e){e.o&&(e.o.onload=null,e.o.onreadystatechange=null,e.o.onerror=null),e.o=null}function vt(e){var t=e.url.split("/"),n=parseInt(t[2],10),i=parseInt(t[3],10),r=new Qn(null,null);return Hn(r).then(function(){return zn(r,n,i)}).then(z(e,function(e){var t=JSON.parse(JSON.stringify(new XMLHttpRequest));return t.response=e,e=this.ta,e.resolve(t),Gn(r),At(this),e}))["catch"](z(e,function(e){return Gn(r),At(this),Promise.reject(e)}))}function Et(e,t,n){return t=Error(t),t.type=n,t.status=e.o.status,t.url=e.url,t.method=e.n.method,t.body=e.n.body,t.ue=e.o,t}function wt(e){gt.call(this,e),this.n.responseType="text",this.n.Sb=3,this.n.qd=!0}function bt(e,t,n){gt.call(this,e),this.n.body=t,this.n.method="POST",this.n.Sb=3,this.n.withCredentials=n}function Mt(e,t,n,i,r){gt.call(this,e),(t||n)&&(this.n.Dc.Range="bytes="+(t+"-"+(null!=n?n:""))),i&&(this.n.Sb=i),r&&(this.n.Qc=r)}function Pt(e,t,n){this.cd=e,this.ka=t,this.X=n,this.j=new U,this.La={},this.Na=this.D=null,Y(this.j,this.ka,"updateend",this.Zd.bind(this))}function jt(e,t){for(var n=e.ka.buffered,i=0;i<n.length;++i){var r=n.start(i)-Ti,o=n.end(i)+Ti;if(t>=r&&o>=t)return n.end(i)-t}return 0}function Tt(e,t,n){i(t.every(function(e){return e.url==t[0].url})),e.D.append(function(){var e=new Mt(t[0].url.toString(),t[0].Ca,t[t.length-1].Ya,3,1e3*(t[0].endTime?t[0].endTime-t[0].startTime:1));return e.J=this.X,[e.send()["catch"](function(e){return-1==n.indexOf(e.status)?Promise.reject(e):void this.D.end()}.bind(this)),e.abort.bind(e)]}.bind(e)),e.D.append(function(e){return this.X.getBandwidth(),[kt(this,e),this.ic.bind(this)]}.bind(e)),e.D.append(function(){for(var e=0;e<t.length;++e)this.La[t[e].id]=!0}.bind(e))}function kt(e,t){try{e.ka.appendBuffer(t)}catch(n){return Promise.reject(n)}return e.Na=new K,e.Na}function Ct(){this.V=ki++,this.id=null,this.timestampOffset=0,this.height=this.width=this.bandwidth=this.na=null,this.W=this.l="",this.K=null,this.enabled=!0,this.Fc=this.ca=this.f=this.ja=this.kb=null}function Lt(e){return e.ja?e.Sc():Promise.resolve()}function _t(e){if(!e.kb||e.f)return Promise.resolve();if(!e.K)return e=Error("Cannot create segment index without a media URL."),e.type="stream",Promise.reject(e);var t=0<=e.l.indexOf("mp4"),n=0<=e.l.indexOf("webm");if(!t&&!n)return e=Error("Cannot create segment index with an unsupported MIME type."),e.type="stream",Promise.reject(e);if(n&&!e.ca&&!e.ja)return e=Error("Cannot create segment index for WebM content without an initialization segment."),e.type="stream",Promise.reject(e);var i=Rt(e);return n&&(i=i.then(e.Sc.bind(e))),i=i.then(z(e,function(){var e=null,e=t?new st(this.K):new pt(this.K),n=this.ca?new DataView(this.ca):null,i=new DataView(this.Fc),e=e.parse(n,i,this.kb.Ca);return e?(this.f=new ut(e),Promise.resolve()):(e=Error("Cannot parse segment references."),e.type="stream",Promise.reject(e))}))}function Rt(e){return e.Fc?Promise.resolve():e.kb.Za().then(z(e,function(e){return this.Fc=e,Promise.resolve()}))}function St(e){var t=e.l||"";return e.W&&(t+='; codecs="'+e.W+'"'),t}function Dt(){this.url=null,this.Ca=0,this.Ya=null}function It(){this.V=Ci++,this.id=null,this.contentType="",this.e=[],this.Xa=[],this.lang="",this.vb=!1}function Nt(){this.id=null,this.start=0,this.duration=null,this.v=[]}function xt(){this.$=!1,this.Q=0,this.q=[]}function Bt(){this.id=0,this.pa=null,this.xa=this.contentType=""}function Ot(e){this.ab=e,this.b=new xt}function Ft(e){if(e.w.length){null==e.w[0].start&&(e.w[0].start=0);var t=function(e){return 0==e||!!e};"static"!=e.type&&(e.sa=null),t(e.sa)&&1==e.w.length&&!t(e.w[0].duration)&&(e.w[0].duration=e.sa);for(var n=0,i=!0,r=0;r<e.w.length;++r){var o=e.w[r-1],a=e.w[r],s=e.w[r+1]||{start:e.sa};!t(a.start)&&o&&t(o.start)&&t(o.duration)&&(a.start=o.start+o.duration),!t(a.duration)&&t(s.start)&&(a.duration=s.start-a.start),null!=a.start&&null!=a.duration?n+=a.duration:i=!1}t(e.sa)||(r=e.w[e.w.length-1],i?e.sa=n:t(r.start)&&t(r.duration)?e.sa=r.start+r.duration:"static"==e.type&&(e.sa=n))}}function Ut(e,t){var n,i=e.B;if(i.ga){if(n=Gt(i.ga,e.id,1,e.bandwidth,0),!n)return!1;n=e.d?e.d.resolve(n):n}else n=new ve(e.d);var r,o=e.B;return o.Ja?(r=new Be,(o=Gt(o.Ja,e.id,null,e.bandwidth,null))?r.url=e.d&&o?e.d.resolve(o):o:r=null):r=null,r?(o=null,i.qa&&(o=Ht(e),!o)?!1:(t.K=new ve(n),i.t&&(t.timestampOffset=-1*i.t/i.m),t.kb=Vt(r),t.ja=Vt(o),!0)):!1}function Yt(e,t,n,i,r){if(null==n.start)return!1;if(n=i.B,!n.ga)return!1;var o;e:{var a=n.ob.ec,s=0,l=[];for(o=0;o<a.length;++o)for(var u=a[o].repeat||0,c=0;u>=c;++c){if(!a[o].duration){o=null;break e}var d;d=a[o].startTime&&0==c?a[o].startTime:0==o&&0==c?0:s;var h=d+a[o].duration;0<l.length&&d!=s&&(l[l.length-1].end=d),s=h,l.push({start:d,end:h})}o=l}if(!o)return!1;for(a=0,"dynamic"==t.type&&0<o.length&&(a=Math.max(0,o.length-2),a=o[a].start/n.m-(t.nb||0)),s=[],l=0;l<o.length;++l)if(u=o[l].start,c=u/n.m,d=o[l].end/n.m,!(a>c)){if(h=Gt(n.ga,i.id,l+n.U,i.bandwidth,u),!h)return!1;h=i.d?i.d.resolve(h):h,s.push(new ot(u,c,d,0,null,new ve(h)))}if(o=null,n.qa&&0<s.length&&(o=Ht(i),!o))return!1;if(n.t&&(r.timestampOffset=-1*n.t/n.m),"dynamic"==t.type&&0<s.length)for(e=s[s.length-1].startTime-e.b.Q,e>=a||(e=a),l=0;l<s.length;++l)if(s[l].endTime>=e){r.na=s[l].startTime;break}return r.ja=Vt(o),r.f=new ut(s),!0}function Qt(e,t,n,i){if(null==t.start)return!1;var r=n.B;if(!r.ga)return!1;var o,a,s=0;if("dynamic"==e.type){var l,u=(Date.now()+fi)/1e3,c=null!=e.Kb?e.Kb:u;if(c>u)l=null;else{var d=e.Q||0,h=e.Ic||0;l=r.A/r.m,c=u-(c+t.start),0>c?l=null:(u=c-2*l-e.nb,0>u&&(u=0),u=Math.ceil(u/l)*l,c-=l,0>c?l=null:(d=Math.floor(c/l)*l-h-d,0>d&&(d=0),d=Math.floor(d/l)*l,l={yd:u/l+1,current:(d>=u?d:u)/l+1}))}l&&(o=l.yd,a=l.current,s=a-o)}else o=1;if(l=0,o>=0){e:{if("static"==e.type){if(null==t.duration){l=null;break e}t=t.duration}else t=Math.min(t.duration||Number.POSITIVE_INFINITY,e.xb||Number.POSITIVE_INFINITY,120);l=Math.ceil(t/(r.A/r.m))}if(!l)return!1}for(t=s+l,s=[],l=0;t>l;++l){if(c=l+o,d=(c-1)*r.A,h=d/r.m,u=(d+r.A)/r.m,c=Gt(r.ga,n.id,c-1+r.U,n.bandwidth,(c-1+(r.U-1))*r.A),!c)return!1;c=n.d?n.d.resolve(c):c,s.push(new ot(d,h,u,0,null,new ve(c)))}return o=null,r.qa&&0<s.length&&(o=Ht(n),!o)?!1:(r.t&&(i.timestampOffset=-1*r.t/r.m),"dynamic"==e.type&&0<s.length&&(i.na=r.A/r.m*(a-1)),i.ja=Vt(o),i.f=new ut(s),!0)}function Ht(e){var t=e.B;if(!t.qa)return null;var n=new Oe,t=Gt(t.qa,e.id,null,e.bandwidth,null);return t?(n.url=e.d&&t?e.d.resolve(t):t,n):null}function Gt(t,n,i,r,o){var a={RepresentationID:n,Number:i,Bandwidth:r,Time:o};t=t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(t,n,i){if("$$"==t)return"$";var r=a[n];return null==r?t:("RepresentationID"==n&&i&&(i=void 0),t=r.toString(),i=e.parseInt(i,10)||1,i=Math.max(0,i-t.length),Array(i+1).join("0")+t)});try{return new ve(t)}catch(s){if(s instanceof URIError)return null;throw s}}function Vt(e){if(!e)return null;var t=new Dt;return t.url=e.url,e.R&&(t.Ca=e.R.rb,t.Ya=e.R.end),t}function qt(e,t,n){G.call(this,e),this.a=t,this.c=n,this.F=this.wb=null,this.j=new U,this.Ab={},this.lb=[],this.fd=0,this.Ua=new K,this.Mc=null}function Kt(e){for(var t=new O,n=e.c.Tc(),i=0;i<n.length;++i){var r=n[i];r.pa.keySystem||r.xa&&!hn(r.xa)||t.push(r.contentType,r)}for(var i={},r=!1,o=0;o<n.length;++o){var a=n[o];if(a.pa.keySystem&&!t.has(a.contentType)){var s=a.pa.keySystem,l=i[s];l||(l=i[s]={audioCapabilities:void 0,videoCapabilities:void 0,initDataTypes:void 0,distinctiveIdentifier:"optional",persistentState:e.c.Qb()?"required":"optional"}),a.xa&&(s=a.contentType+"Capabilities",s in l&&(r=!0,l[s]||(l[s]=[]),l[s].push({contentType:a.xa})))}}if(!r){if(!n.length)throw e=Error("No DRM scheme info provided!"),e.type="drm",e;e.F=n[0].pa}return 0==Object.keys(i).length?(e.c.Gc(t),e.Ua.resolve(),Promise.resolve()):(r=new K,i=Jt(i,r),i=i.then(e.vd.bind(e,n,t)),i=i.then(e.pe.bind(e)),r.reject(null),i)}function Wt(t,n){return null==t.Mc&&(t.Mc=e.setTimeout(function(){var e=Error("Timeout waiting for sessions.");e.type="storage",this.Ua.reject(e)}.bind(t),n)),t.Ua}function Jt(e,t){for(var n in e){var i=e[n];t=t["catch"](function(){return navigator.requestMediaKeySystemAccess(n,[i])})}return t}function zt(e){for(var t=e.c.Nb(),n=0;n<t.length;++n){var i=Xt(e),r=i.load(t[n]);e.lb.push(i),r["catch"](z(e,function(e){e=N(e),this.dispatchEvent(e)}))}}function Xt(e){var t=e.c.Qb()?e.wb.createSession("persistent-license"):e.wb.createSession();return Y(e.j,t,"message",e.Xd.bind(e)),Y(e.j,t,"keystatuseschange",e.Od.bind(e)),t}function Zt(e,t,n,i,r,o){new bt(n,i,r).send().then(z(e,function(e){return o&&(e=o(e)),t.update(e)})).then(z(e,function(){var e=I({type:"sessionReady",detail:t});this.dispatchEvent(e),this.fd++,this.fd>=this.lb.length&&this.Ua.resolve()}))["catch"](z(e,function(e){e.we=t,e=N(e),this.dispatchEvent(e)}))}function $t(e,t,n,i,r){G.call(this,e),this.a=t,this.ka=i,this.G=new Pt(n,i,r),this.X=r,this.C=null,this.sb=15,this.Hb=this.yb=null,this.u=_i,this.Sa="",this.xc=!1}function en(e,t){var n=t.l.split("/")[0],n=I({type:"adaptation",bubbles:!0,contentType:n,size:"video"!=n?null:{width:t.width,height:t.height},bandwidth:t.bandwidth});e.dispatchEvent(n)}function tn(e){if(e.yb){var t=e.yb;e.yb=null,t()}else e.ha()}function nn(e,t){for(var n=e.C.f.find(t);n>=0&&n<e.C.f.length();){var i=e.C.f.get(n);if(!e.G.La[i.id])break;n++}return n}function rn(e){if(4!=e.u){e.u=4;var t=I({type:"ended"});e.dispatchEvent(t)}}function on(e,t){G.call(this,e),this.a=t,this.da=this.C=null}function an(){this.streamStats=null,this.droppedFrames=this.decodedFrames=NaN,this.bufferingTime=this.playTime=this.estimatedBandwidth=0,this.playbackLatency=NaN,this.bufferingHistory=[],this.bandwidthHistory=[],this.streamHistory=[]}function sn(e){e.playTime+=a("playing")/1e3}function ln(e,t){var n=new un(t);e.streamHistory.push(new cn(n)),(n.videoHeight||!e.streamStats)&&(e.streamStats=n)}function un(e){this.videoWidth=e.width,this.videoHeight=e.height,this.videoMimeType=e.l,this.videoBandwidth=e.bandwidth}function cn(e){this.timestamp=(Date.now()+fi)/1e3,this.value=e}function dn(e){G.call(this,null),this.a=e,this.c=null,this.j=new U,this.Ga=null,this.ra="en",this.hc=this.Vb=null,this.Wa=!1,this.N=new an,this.jc=!0,this.Ub=new ie}function hn(t){return"text/vtt"==t?!!e.VTTCue:MediaSource.isTypeSupported(t)}function fn(t){t.Vb&&(e.clearTimeout(t.Vb),t.Vb=null)}function pn(t){gn(t),t.hc=e.setTimeout(t.be.bind(t),100)}function gn(t){t.hc&&(e.clearTimeout(t.hc),t.hc=null)}function mn(e){o("buffering");var t=e.N;t.bufferingTime+=a("buffering")/1e3,e.Wa=!1,e.dispatchEvent(I({type:"bufferingEnd"}))}function An(){}function yn(e,t){var n=e.bandwidth||Number.MAX_VALUE,i=t.bandwidth||Number.MAX_VALUE;return i>n?-1:n>i?1:0}function vn(e,t){this.X=e,this.c=t,this.j=new U,this.gb=Number.POSITIVE_INFINITY,this.Rc=!0}function En(e){var t=e.c.getVideoTracks();if(0==t.length)return null;t.sort(c);var n;e:{n=e.c.getAudioTracks();for(var i=0;i<n.length;++i)if(n[i].active){n=n[i];break e}n=null}n=n?n.bandwidth:0,e=e.X.getBandwidth();for(var i=t[0],r=0;r<t.length;++r){var o=t[r],a=r+1<t.length?t[r+1]:{bandwidth:Number.POSITIVE_INFINITY};if(o.bandwidth&&(a=(a.bandwidth+n)/.85,e>=(o.bandwidth+n)/.95&&a>=e&&(i=o,i.active)))break}return i}function wn(e,t,n){G.call(this,null),this.eb=e,this.rd=t,this.F=n?n:re(),this.la=null}function bn(e,t){G.call(this,null),this.b=e,this.ra="",this.Lb=null,this.ba=new MediaSource,this.video=null,this.s={},this.pd=0,this.Bc=1,this.wc=Number.POSITIVE_INFINITY,this.bb=Number.NEGATIVE_INFINITY,this.r=new O,this.fa=new U,this.H=null,this.Jb=new K,this.cc=!1,this.J=t,this.N=null,this.qb=new vn(this.J,this)}function Mn(e,t){var n=new O;e.b.q.forEach(function(e,t){n.push(e.id||""+t,e)});var i=new O;t.q.forEach(function(e,t){i.push(e.id||""+t,e)});for(var r=n.keys(),o=0;o<r.length;++o){var a=r[o],s=n.get(a);1<s.length||(a=i.get(a))&&0!=a.length&&1==a.length&&(s[0].duration=a[0].duration,Pn(e,s[0],a[0]))}}function Pn(e,t,n){var i=new O;t.v.forEach(function(e,t){i.push(e.id||""+t,e)});var r=new O;for(n.v.forEach(function(e,t){r.push(e.id||""+t,e)}),t=i.keys(),n=0;n<t.length;++n){var o=t[n],a=i.get(o);1<a.length||(o=r.get(o))&&0!=o.length&&1==o.length&&jn(e,a[0],o[0])}}function jn(e,t,n){var i=new O;t.e.forEach(function(e,t){i.push(e.id||""+t,e);
});var r=new O;n.e.forEach(function(e,t){r.push(e.id||""+t,e)}),n={};for(var o=i.keys(),a=0;a<o.length;++a){var s=o[a];n[s]=s;var l=i.get(s);1<l.length||((s=r.get(s))&&0!=s.length?1==s.length&&(l=l[0],s=s[0],l.timestampOffset=s.timestampOffset,l.na=s.na,l.ja=s.ja,l.ca=null,Tn(l,s)):kn(e,t,l[0]))}for(o=r.keys(),a=0;a<o.length;++a)s=o[a],n[s]||(n[s]=s,s=r.get(s),t.e.push(s[0]))}function Tn(e,t){if(e.f&&t.f){var n=e.f,i=t.f;if(n.pb!=i.pb&&(i=new ut(ht(i.g,n.pb-i.pb))),0==n.length())n.g=i.g.slice(0),ft(n);else if(0!=i.length()&&null!=ct(n).endTime&&!(null!=ct(i).endTime&&ct(i).endTime<ct(n).endTime)){if(ct(n).endTime<=i.first().startTime)var r=at(ct(n),ct(n).startTime,i.first().startTime),r=n.g.slice(0,-1).concat([r]);else{var o;for(o=0;o<n.g.length&&!(n.g[o].endTime>=i.first().startTime);++o);n.g[o].startTime<i.first().startTime?(r=at(n.g[o],n.g[o].startTime,i.first().startTime),r=n.g.slice(0,o).concat([r])):(n.first().startTime>i.first().startTime||i.first(),r=n.g.slice(0,o))}n.g=r.concat(i.g),ft(n)}e.f.length()}}function kn(e,t,n){var i=e.s[t.contentType];if(i&&i.C==n){e=e.r.get(t.contentType);e:{for(var r=0;r<e.length;++r)for(var o=e[r],a=0;a<o.e.length;++a){var s=o.e[a];if(s!=n&&s.enabled){e=s;break e}}e=null}if(!e)return;i.dc(e,!0)}t.e.splice(t.e.indexOf(n),1)}function Cn(e,t,n,i){if(!e.r.has(t))return!1;for(var r=e.r.get(t),o=0;o<r.length;++o)for(var a=r[o],s=0;s<a.e.length;++s){var l=a.e[s];if(l.V==n)return ln(e.N,l),e.s[t].dc(l,i),!0}return!1}function Ln(e,t){for(var n=0;2>=n;++n)for(var i=0;i<t.length;++i){var r=t[i];if(x(n,e.ra,r.lang))return t.splice(i,1),void t.splice(0,0,r)}for(i=0;i<t.length;++i)if(r=t[i],r.vb){t.splice(i,1),t.splice(0,0,r);break}}function _n(e){if(i(0==Object.keys(e.s).length),!Sn(e))return e.b.$?Promise.resolve():(e=Error("Not all streams are available."),e.type="stream",Promise.reject(e));var t=e.b.q[0].duration;null!=t&&(e.ba.duration=t);for(var t=[],n=["audio","video","text"],r=0;r<n.length;++r){var o=n[r];e.r.has(o)&&t.push(e.r.get(o)[0])}e.Bc=e.video.playbackRate,e.video.playbackRate=0;var a=Rn(e,t);return e.H=new W,e.H.append(function(){var e,t=[];for(e in a)t.push(_t(a[e]));return[Promise.all(t)]}.bind(e)),e.H.append(function(){var e;if((e=Dn(this))?(this.pd=this.b.$?e.end:e.start,e=!0):e=!1,!e){var t=Error("The streams' timelines are disjoint.");return t.type="stream",[Promise.reject(t)]}e:{for(t in a){e=a[t];var n;if("text"==t)n=new on(this,this.video);else t:{n=e;var i=void 0;try{i=this.ba.addSourceBuffer(St(n))}catch(r){n=null;break t}try{i.timestampOffset=n.timestampOffset}catch(o){n=null;break t}n=new $t(this,this.video,this.ba,i,this.J)}if(!n){t=Error("Cannot create stream for "+St(e)+"."),t.type="stream",t=Promise.reject(t);break e}this.s[t]=n}t=Promise.resolve()}return[t]}.bind(e)),e.H.append(function(){this.jd(a),this.video.currentTime=this.pd;for(var e in this.s){var t=this.s[e];Y(this.fa,t,"started",this.ae.bind(this)),Y(this.fa,t,"ended",this.$d.bind(this));var n=a[e];ln(this.N,n),t.start(n,this.b.Q)}return this.ub(this.cc),this.qb.start(),[Promise.resolve()]}.bind(e)),e.H.start(),e.H.Fb.then(z(e,function(){this.H=null}))["catch"](z(e,function(e){return this.H=null,"aborted"==e.type||(In(this),this.video.playbackRate=this.Bc,this.b.$)?void 0:Promise.reject(e)}))}function Rn(e,t){for(var n={},i=0;i<t.length;++i){var r=t[i],o=r.e[0];if("video"==r.contentType){var a;a=(a=En(e.qb))?a.id:null;for(var s=0;s<r.e.length&&(o=r.e[s],o.V!=a);++s);}else"audio"==r.contentType&&(o=r.e[Math.floor(r.e.length/2)]);n[r.contentType]=o}return n}function Sn(e){e=F(e.r);for(var t=0;t<e.length;++t)for(var n=e[t],i=0;i<n.e.length;++i){var r=n.e[i];if(!("text"==r.l.split("/")[0]||null!=r.kb||null!=r.f&&0<r.f.length()))return!1}return!0}function Dn(e){for(var t=0,n=Number.POSITIVE_INFINITY,i=F(e.r),r=0;r<i.length;++r){var o=i[r];if("text"!=o.contentType)for(var a=0;a<o.e.length;++a){var s=o.e[a],l=s.f;l&&0!=l.length()&&(t=Math.max(t,l.first().startTime),null!=s.na?n=Math.min(n,s.na):null!=ct(l).endTime&&(n=Math.min(n,ct(l).endTime)))}}return n==Number.POSITIVE_INFINITY&&(e=e.b.q[0].duration,null!=e&&(n=e)),t>n?null:{start:t,end:n}}function In(e){for(var t in e.s)e.s[t].p();e.s={}}function Nn(e,t,n){n||(n=new q),bn.call(this,null,n),this.dd=e,this.fb=null,this.ab=t,this.Rb=this.Jc=null,this.tc=new S(5),this.Ib=null,this.T=this.L=this.rc=this.sc=this.fc=0,this.Hc=!1,this.Wb=null}function xn(t){var n=Math.max(t.fb.xb||0,3);t.Ib=e.setTimeout(t.ha.bind(t),1e3*n)}function Bn(e){for(var t=0,n=0;n<e.b.q.length;++n)for(var i=e.b.q[n],r=0;r<i.v.length;++r)for(var o=i.v[r],a=0;a<o.e.length;++a){var s=o.e[a].f;if(s&&0!=s.length())var l=Math.max(0,s.length()-2),s=s.get(l),t=Math.max(t,s.startTime)}e.Jc=t-D(e.tc)-1}function On(e){var t=I({type:"seekrangechanged",bubbles:!0,start:e.L,end:e.T});e.dispatchEvent(t)}function Fn(t){t.Wb=e.setTimeout(t.Vd.bind(t,Date.now()),1e3)}function Un(t){t.Wb&&(e.clearTimeout(t.Wb),t.Wb=null)}function Yn(e){e.tc.sample(1,Date.now()/1e3-e.Rb)}function Qn(e,t){G.call(this,t),this.va=null,this.X=e}function Hn(t){if(!e.indexedDB)return Promise.reject(Error("Offline storage requires IndexedDB support."));var n=new K,i=e.indexedDB.open("content_database",1);return i.onupgradeneeded=z(t,function(e){this.va=e.target.result,Vn(this,"group_store",{keyPath:"group_id"}),Vn(this,"stream_index_store",{keyPath:"stream_id"}),e=Vn(this,"content_store",{autoIncrement:"true"}),e.createIndex("segment",["stream_id","segment_id"],{unique:!0}),e.createIndex("stream","stream_id",{unique:!1})}),i.onsuccess=z(t,function(e){this.va=e.target.result,n.resolve()}),i.onerror=function(){n.reject(i.error)},n}function Gn(e){e.va&&e.va.close()}function Vn(e,t,n){return e.va.objectStoreNames.contains(t)&&e.va.deleteObjectStore(t),e.va.createObjectStore(t,n)}function qn(e,t,n,i,r){for(var o=[],a=0,s=0,l=Promise.resolve(),u=0;u<t.length;++u)var c=t[u],d=[_t(c),Lt(c)],l=l.then(function(e){return Promise.all(e)}.bind(e,d)).then(function(e){a+=e.f.length()}.bind(e,c));for(u=0;u<t.length;++u)c=t[u],l=l.then(function(e){return Kn(this,e,a,s)}.bind(e,c)),l=l.then(function(e,t){s+=e.f.length(),o.push(t)}.bind(e,c));return l.then(z(e,function(){return Wn(ri(this))})).then(z(e,function(e){var t=new K,a={group_id:e,stream_ids:o,session_ids:n,duration:i,key_system:r.keySystem},s=ri(this).put(a);return s.onsuccess=function(){t.resolve(e)},s.onerror=function(){t.reject(s.error)},t}))}function Kn(e,t,n,i){var r=[Wn(ii(e)),Wn(ni(e).index("stream"))],r=Promise.all(r).then(z(e,function(e){return{Eb:Math.max(e[0],e[1]),jb:new ArrayBuffer(0),Xb:0,zb:[],nc:null,se:n,kd:i}})),r=r.then(e.Gd.bind(e,t));return r=r.then(e.Hd.bind(e,t))}function Wn(e){var t=new K,n=e.openCursor(null,"prev");return n.onsuccess=function(e){e.target.result?t.resolve(e.target.result.key+1):t.resolve(0)},n.onerror=function(){t.reject(n.error)},t}function Jn(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n.buffer}function zn(e,t,n){return ei(ni(e).index("segment"),[t,n]).then(function(e){return Promise.resolve(e.content)})}function Xn(e,t){return ei(ii(e),t)}function Zn(e,t){return ei(ri(e),t).then(function(e){return e.hasOwnProperty("duration")||e.hasOwnProperty("key_system")?Promise.resolve(e):Xn(this,e.xe[0]).then(function(t){return e.duration=t.duration,e.Id=t.Id,Promise.resolve(e)})}.bind(e))}function $n(e){var t=new K,n=[],i=ri(e).openCursor();return i.onerror=function(){t.reject(i.error)},i.onsuccess=function(e){(e=e.target.result)?(n.push(e.key),e["continue"]()):t.resolve(n)},t}function ei(e,t){var n=new K,i=e.get(t);return i.onerror=function(){n.reject(i.error)},i.onsuccess=function(){if(i.result)n.resolve(i.result);else{var e=Error("Item not found.");e.type="storage",n.reject(e)}},n}function ti(e,t){var n=new K,i=ii(e)["delete"](t);i.onerror=function(){n.reject(i.error)};var r=ni(e);return r.index("stream").openKeyCursor(IDBKeyRange.only(t)).onsuccess=function(e){(e=e.target.result)&&(r["delete"](e.primaryKey),e["continue"]())},r.transaction.oncomplete=function(){n.resolve()},n}function ni(e){return oi(e,"content_store")}function ii(e){return oi(e,"stream_index_store")}function ri(e){return oi(e,"group_store")}function oi(e,t){return e.va.transaction([t],"readwrite").objectStore(t)}function ai(e,t){t||(t=new q),bn.call(this,null,t),this.Vc=e,this.ac=[],this.timeoutMs=3e4}function si(e,t){for(var n=[],i=0;i<t.length;++i)try{n[i]=e.ba.addSourceBuffer(St(t[i]))}catch(r){}if(t.length!=n.length)return n=Error("Error initializing streams."),n.type="storage",Promise.reject(n);for(i=0;i<t.length;++i)n[i].appendBuffer(t[i].ca);return Promise.resolve()}function li(e,t,n,i){var r=new Qn(e.J,e),o=Hn(r);return o=o.then(z(e,function(){return qn(r,t,this.ac,i,n)})).then(function(e){return Gn(r),Promise.resolve(e)})["catch"](function(e){return Gn(r),Promise.reject(e)})}var ui,ci=this,di=e.performance?e.performance.now.bind(e.performance):Date.now,hi={};t("shaka.player.AudioTrack.compare",function(e,t){return e.lang<t.lang?-1:e.lang>t.lang?1:e.bandwidth<t.bandwidth?-1:e.bandwidth>t.bandwidth?1:0}),t("shaka.player.TextTrack.compare",function(e,t){return e.lang<t.lang?-1:e.lang>t.lang?1:0}),t("shaka.player.VideoTrack.compare",c),t("shaka.polyfill.CustomEvent.install",d),t("shaka.polyfill.Fullscreen.install",f),A.prototype.createSession=function(){},y.prototype.getConfiguration=function(){},y.prototype.createMediaKeys=function(){},t("shaka.polyfill.VideoPlaybackQuality.install",v);var fi=0,pi=1;w.prototype.Ia=function(){return this.h<this.i.byteLength};var gi=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])];k.prototype.Ia=function(){return this.Pa.Ia()},S.prototype.sample=function(e,t){var n=Math.pow(this.Nc,e);this.lc=t*(1-n)+n*this.lc,this.gc+=e};var mi=1,Ai=2,yi={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};ui=O.prototype,ui.push=function(e,t){this.aa.hasOwnProperty(e)?this.aa[e].push(t):this.aa[e]=[t]},ui.set=function(e,t){this.aa[e]=t},ui.has=function(e){return this.aa.hasOwnProperty(e)},ui.get=function(e){return(e=this.aa[e])?e.slice():null},ui.remove=function(e,t){var n=this.aa[e];if(n)for(var i=0;i<n.length;++i)n[i]==t&&(n.splice(i,1),--i)},ui.keys=function(){var e,t=[];for(e in this.aa)t.push(e);return t},ui.clear=function(){this.aa={}},U.prototype.p=function(){Q(this),this.Va=null},U.prototype.Gb=function(e,t){for(var n=this.Va.get(t)||[],i=0;i<n.length;++i){var r=n[i];r.target==e&&(r.Gb(),this.Va.remove(t,r))}},H.prototype.Gb=function(){this.target&&(this.target.removeEventListener(this.type,this.bd,!1),this.bd=this.target=null)},t("shaka.util.FakeEventTarget",G),G.prototype.addEventListener=function(e,t,n){n||this.uc.push(e,t)},G.prototype.removeEventListener=function(e,t,n){n||this.uc.remove(e,t)},G.prototype.dispatchEvent=function(e){return delete e.srcElement,delete e.target,delete e.currentTarget,Object.defineProperties(e,{srcElement:{value:null,writable:!0},target:{value:this,writable:!0},currentTarget:{value:null,writable:!0}}),V(this,e)},n(q,G),t("shaka.util.EWMABandwidthEstimator",q),q.prototype.sample=function(e,t){if(!(t<this.Jd)){e=Math.max(e,this.Kd);var n=8e3*t/e,i=e/1e3;this.mc.sample(i,n),this.nd.sample(i,n),this.dispatchEvent(I({type:"bandwidth"})),this.Zc=Date.now()}},q.prototype.getBandwidth=function(){return this.mc.gc<this.Ld?this.xd:Math.min(D(this.mc),D(this.nd))},q.prototype.getDataAge=function(){return(Date.now()-this.Zc)/1e3},W.prototype.append=function(e){if(this.Db)throw Error("Cannot append to a running task!");this.Ba.push(e)},W.prototype.start=function(){if(this.Db)throw Error("Task already started!");this.Db=!0,this.Ba.unshift(function(){}),J(this,void 0)},W.prototype.abort=function(){if(this.ea)return this.ea;var e=Error("Task aborted.");return e.type="aborted",this.Fb.reject(e),this.Db?(this.Ea&&this.Ea(),this.ea=new K):(this.Db=!0,Promise.resolve())},W.prototype.end=function(){this.Ba.splice(1)},t("shaka.util.Uint8ArrayUtils.toString",X),t("shaka.util.Uint8ArrayUtils.fromString",Z),t("shaka.util.Uint8ArrayUtils.toBase64",function(t,n){var i=void 0==n?!0:n,r=e.btoa(X(t)).replace(/\+/g,"-").replace(/\//g,"_");return i?r:r.replace(/=*$/,"")}),t("shaka.util.Uint8ArrayUtils.fromBase64",$),t("shaka.util.Uint8ArrayUtils.fromHex",function(t){for(var n=new Uint8Array(t.length/2),i=0;i<t.length;i+=2)n[i/2]=e.parseInt(t.substr(i,2),16);return n}),t("shaka.util.Uint8ArrayUtils.toHex",ee),t("shaka.player.DrmSchemeInfo",ne),ie.prototype.clone=function(){var e=new ie;return e.maxHeight=this.maxHeight,e.maxWidth=this.maxWidth,e.maxBandwidth=this.maxBandwidth,e.minBandwidth=this.minBandwidth,e},ne.createUnencrypted=re,ne.combine=oe,ne.prototype.key=function(){return JSON.stringify(this)},le.prototype.createMediaKeys=function(){var e=new ue(this.$a);return Promise.resolve(e)},le.prototype.getConfiguration=function(){return this.wd},ui=ue.prototype,ui.createSession=function(e){var t=e||"temporary";if("temporary"!=t&&"persistent-license"!=t)throw new TypeError("Session type "+e+" is unsupported on this platform.");return e=this.za||document.createElement("video"),e.src||(e.src="about:blank"),t=new he(e,this.Ma,t),this.ed.push(t),t},ui.fe=function(e){e=I({type:"encrypted",initDataType:"webm",initData:e.initData}),this.za.dispatchEvent(e)},ui.ee=function(e){var t=de(this,e.sessionId);t&&(e=I({type:"message",messageType:isNaN(t.expiration)?"licenserequest":"licenserenewal",message:e.message}),t.Y&&(t.Y.resolve(),t.Y=null),t.dispatchEvent(e))},ui.ce=function(e){(e=de(this,e.sessionId))&&e.ready()},ui.de=function(e){var t=de(this,e.sessionId);t&&t.handleError(e)},n(he,G),ui=he.prototype,ui.ready=function(){this.expiration=Number.POSITIVE_INFINITY,pe(this,"usable"),this.O&&this.O.resolve(),this.O=null},ui.handleError=function(e){var t=Error("EME v0.1b key error");t.errorCode=e.errorCode,t.errorCode.systemCode=e.systemCode,!e.sessionId&&this.Y?(t.method="generateRequest",45==e.systemCode&&(t.message="Unsupported session type."),this.Y.reject(t),this.Y=null):e.sessionId&&this.O?(t.method="update",this.O.reject(t),this.O=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?pe(this,"output-not-allowed"):1==t?pe(this,"expired"):pe(this,"internal-error"))},ui.Lc=function(e,t){if(this.O)this.O.then(this.Lc.bind(this,e,t))["catch"](this.Lc.bind(this,e,t));else{this.O=e;var n,i;"webkit-org.w3.clearkey"==this.Ma?(n=X(new Uint8Array(t)),i=JSON.parse(n),n=i.keys[0].kty,("A128KW"!=i.keys[0].alg||"oct"!=n)&&(this.O.reject(Error("Response is not a valid JSON Web Key Set.")),this.O=null),n=$(i.keys[0].k),i=$(i.keys[0].kid)):(n=new Uint8Array(t),i=null);try{this.za.webkitAddKey(this.Ma,n,i,this.sessionId)}catch(r){this.O.reject(r),this.O=null}}},ui.generateRequest=function(e,t){return fe(this,t,null)},ui.load=function(e){return"persistent-license"==this.Sa?fe(this,null,e):Promise.reject(Error("Not a persistent session."))},ui.update=function(e){var t=new K;return this.Lc(t,e),t},ui.close=function(){if("persistent-license"!=this.Sa){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.za.webkitCancelKeyRequest(this.Ma,this.sessionId)}return this.closed.resolve(),this.closed},ui.remove=function(){return"persistent-license"!=this.Sa?Promise.reject(Error("Not a persistent session.")):this.close()},ge.prototype.next=function(){return this.Xc>=this.td.length?{value:void 0,done:!0}:{value:this.td[this.Xc++],done:!1}};var vi=Z("FAKE_KEY_ID");ui=me.prototype,ui.forEach=function(e){this.Da&&e(this.Da)},ui.get=function(e){return this.has(e)?this.Da:void 0},ui.has=function(e){return this.Da&&te(new Uint8Array(e),vi)?!0:!1},ui.keys=function(){var e=[];return this.Da&&e.push(vi),new ge(e)},ui.values=function(){var e=[];return this.Da&&e.push(this.Da),new ge(e)},t("shaka.polyfill.MediaKeys.install",Ae),t("shaka.polyfill.installAll",function(){d(),f(),Ae(),v()});var Ei=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;ui=ve.prototype,ui.Aa="",ui.Ta="",ui.oa="",ui.hb=null,ui.ia="",ui.Ha="",ui.toString=function(){var e=[],t=this.Aa;if(t&&e.push(Pe(t,wi,!0),":"),t=this.oa){e.push("//");var n=this.Ta;n&&e.push(Pe(n,wi,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.hb,null!=t&&e.push(":",String(t))}return(t=this.ia)&&(this.oa&&"/"!=t.charAt(0)&&e.push("/"),e.push(Pe(t,"/"==t.charAt(0)?Mi:bi,!0))),(t=this.Oa.toString())&&e.push("?",t),(t=this.Ha)&&e.push("#",Pe(t,ji)),e.join("")},ui.resolve=function(e){var t=this.clone(),n=!!e.Aa;n?Ee(t,e.Aa):n=!!e.Ta,n?t.Ta=e.Ta:n=!!e.oa,n?t.oa=e.oa:n=null!=e.hb;var i=e.ia;if(n)we(t,e.hb);else if(n=!!e.ia){if("/"!=i.charAt(0))if(this.oa&&!this.ia)i="/"+i;else{var r=t.ia.lastIndexOf("/");-1!=r&&(i=t.ia.substr(0,r+1)+i)}if(".."==i||"."==i)i="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){for(var r=0==i.lastIndexOf("/",0),i=i.split("/"),o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}i=o.join("/")}}return n?t.ia=i:n=""!==e.Oa.toString(),n?be(t,e.Oa.clone()):n=!!e.Ha,n&&(t.Ha=e.Ha),t},ui.clone=function(){return new ve(this)};var wi=/[#\/\?@]/g,bi=/[\#\?:]/g,Mi=/[\#\?]/g,Pi=/[\#\?@]/g,ji=/#/g;ui=Te.prototype,ui.P=null,ui.Mb=null,ui.add=function(e,t){if(!this.P&&(this.P={},this.Mb=0,this.wa))for(var n=this.wa.split("&"),i=0;i<n.length;i++){var r=n[i].indexOf("="),o=null,a=null;r>=0?(o=n[i].substring(0,r),a=n[i].substring(r+1)):o=n[i],o=decodeURIComponent(o.replace(/\+/g," ")),a=a||"",this.add(o,decodeURIComponent(a.replace(/\+/g," ")))}return this.wa=null,(n=this.P.hasOwnProperty(e)&&this.P[e])||(this.P[e]=n=[]),n.push(t),this.Mb++,this},ui.toString=function(){if(this.wa)return this.wa;if(!this.P)return"";var e,t=[];for(e in this.P)for(var n=encodeURIComponent(e),i=this.P[e],r=0;r<i.length;r++){var o=n;""!==i[r]&&(o+="="+encodeURIComponent(i[r])),t.push(o)}return this.wa=t.join("&")},ui.clone=function(){var e=new Te;if(e.wa=this.wa,this.P){var t,n={};for(t in this.P)n[t]=this.P[t].concat();e.P=n,e.Mb=this.Mb}return e},xe.prototype.clone=function(){var e=new xe;return e.d=this.d?new ve(this.d):null,e.m=this.m,e.t=this.t,e.ya=Xe(this.ya),e.Qa=Xe(this.Qa),e.Z=Xe(this.Z),e},Be.prototype.clone=function(){var e=new Be;return e.url=this.url?new ve(this.url):null,e.R=Xe(this.R),e},Oe.prototype.clone=function(){var e=new Oe;return e.url=this.url?new ve(this.url):null,e.R=Xe(this.R),e},Fe.prototype.clone=function(){var e=new Fe;return e.d=this.d?new ve(this.d):null,e.m=this.m,e.t=this.t,e.A=this.A,e.U=this.U,e.Z=Xe(this.Z),e.Ra=this.Ra.map(function(e){return e.clone()}),e},Ue.prototype.clone=function(){var e=new Ue;return e.K=this.K?new ve(this.K):null,e.cb=Xe(this.cb),e},Ye.prototype.clone=function(){var e=new Ye;return e.m=this.m,e.t=this.t,e.A=this.A,e.U=this.U,e.ga=this.ga,e.Ja=this.Ja,e.qa=this.qa,e.ob=Xe(this.ob),e},Qe.prototype.clone=function(){var e=new Qe;return e.ec=this.ec.map(function(e){return e.clone()}),e},He.prototype.clone=function(){var e=new He;return e.startTime=this.startTime,e.duration=this.duration,e.repeat=this.repeat,e},Ge.prototype.clone=function(){return new Ge(this.rb,this.end)},ke.TAG_NAME="MPD",Ce.TAG_NAME="Period",Le.TAG_NAME="AdaptationSet",_e.TAG_NAME="Role",Re.TAG_NAME="ContentComponent",Se.TAG_NAME="Representation",De.TAG_NAME="ContentProtection",Ie.TAG_NAME="cenc:pssh",Ne.TAG_NAME="BaseURL",xe.TAG_NAME="SegmentBase",Be.TAG_NAME="RepresentationIndex",Oe.TAG_NAME="Initialization",Fe.TAG_NAME="SegmentList",Ue.TAG_NAME="SegmentURL",Ye.TAG_NAME="SegmentTemplate",Qe.TAG_NAME="SegmentTimeline",He.TAG_NAME="S",ke.prototype.parse=function(e,t){this.id=Ze(t,"id",rt),this.type=Ze(t,"type",rt)||"static",this.sa=Ze(t,"mediaPresentationDuration",et),this.Q=Ze(t,"minBufferTime",et,this.Q),this.xb=Ze(t,"minimumUpdatePeriod",et,this.xb),this.Kb=Ze(t,"availabilityStartTime",$e,this.Kb),this.nb=Ze(t,"timeShiftBufferDepth",et,this.nb),this.Ic=Ze(t,"suggestedPresentationDelay",et,this.Ic);var n=Ke(this,t,Ne);this.d=Ve(e.d,n?n.url:null),this.w=Je(this,t,Ce)},Ce.prototype.parse=function(e,t){this.id=Ze(t,"id",rt),this.start=Ze(t,"start",et),this.duration=Ze(t,"duration",et);var n=Ke(this,t,Ne);this.d=Ve(e.d,n?n.url:null),this.M=Ke(this,t,xe),this.I=Ke(this,t,Fe),this.B=Ke(this,t,Ye),this.ua=Je(this,t,Le)},Le.prototype.parse=function(e,t){var n=Ke(this,t,Re)||{},i=Ke(this,t,_e);this.id=Ze(t,"id",rt),this.lang=Ze(t,"lang",rt,n.lang),this.contentType=Ze(t,"contentType",rt,n.contentType),this.width=Ze(t,"width",nt),this.height=Ze(t,"height",nt),this.l=Ze(t,"mimeType",rt),this.W=Ze(t,"codecs",rt),this.vb=i&&"main"==i.value,this.lang&&(this.lang=B(this.lang)),n=Ke(this,t,Ne),this.d=Ve(e.d,n?n.url:null),this.ma=Je(this,t,De),!this.contentType&&this.l&&(this.contentType=this.l.split("/")[0]),this.M=e.M?qe(this,t,e.M):Ke(this,t,xe),this.I=e.I?qe(this,t,e.I):Ke(this,t,Fe),this.B=e.B?qe(this,t,e.B):Ke(this,t,Ye),this.S=Je(this,t,Se),!this.l&&this.S.length&&(this.l=this.S[0].l,!this.contentType&&this.l&&(this.contentType=this.l.split("/")[0]))},_e.prototype.parse=function(e,t){this.value=Ze(t,"value",rt)},Re.prototype.parse=function(e,t){this.id=Ze(t,"id",rt),this.lang=Ze(t,"lang",rt),this.contentType=Ze(t,"contentType",rt),this.lang&&(this.lang=B(this.lang))},Se.prototype.parse=function(e,t){this.id=Ze(t,"id",rt),this.bandwidth=Ze(t,"bandwidth",nt),this.width=Ze(t,"width",nt,e.width),this.height=Ze(t,"height",nt,e.height),this.l=Ze(t,"mimeType",rt,e.l),this.W=Ze(t,"codecs",rt,e.W),this.lang=e.lang;var n=Ke(this,t,Ne);this.d=Ve(e.d,n?n.url:null),this.ma=Je(this,t,De),this.M=e.M?qe(this,t,e.M):Ke(this,t,xe),this.I=e.I?qe(this,t,e.I):Ke(this,t,Fe),this.B=e.B?qe(this,t,e.B):Ke(this,t,Ye),0==this.ma.length&&(this.ma=e.ma)},De.prototype.parse=function(e,t){this.schemeIdUri=Ze(t,"schemeIdUri",rt),this.value=Ze(t,"value",rt),this.pssh=Ke(this,t,Ie),this.children=Array.prototype.slice.call(t.childNodes)},Ie.prototype.parse=function(e,t){var n=ze(t);if(n){this.psshBox=$(n);try{this.parsedPssh=new ye(this.psshBox)}catch(i){if(!(i instanceof RangeError))throw i}}},Ne.prototype.parse=function(e,t){this.url=ze(t)},xe.prototype.parse=function(e,t){this.d=e.d||this.d,this.m=Ze(t,"timescale",nt,this.m),this.t=Ze(t,"presentationTimeOffset",it,this.t),this.ya=Ze(t,"indexRange",tt,this.ya),this.Qa=Ke(this,t,Be)||this.Qa,this.Z=Ke(this,t,Oe)||this.Z},Be.prototype.parse=function(e,t){var n=Ze(t,"sourceURL",rt);this.url=Ve(e.d,n),this.R=Ze(t,"range",tt,Xe(e.ya))},Oe.prototype.parse=function(e,t){var n=Ze(t,"sourceURL",rt);this.url=Ve(e.d,n),this.R=Ze(t,"range",tt)},Fe.prototype.parse=function(e,t){this.d=e.d||this.d,this.m=Ze(t,"timescale",nt,this.m),this.t=Ze(t,"presentationTimeOffset",it,this.t),this.A=Ze(t,"duration",nt,this.A),this.U=Ze(t,"startNumber",nt,this.U)||1,this.Z=Ke(this,t,Oe)||this.Z,this.Ra=Je(this,t,Ue)||this.Ra},Ue.prototype.parse=function(e,t){var n=Ze(t,"media",rt);this.K=Ve(e.d,n),this.cb=Ze(t,"mediaRange",tt)},Ye.prototype.parse=function(e,t){this.m=Ze(t,"timescale",nt,this.m),this.t=Ze(t,"presentationTimeOffset",it,this.t),this.A=Ze(t,"duration",nt,this.A),this.U=Ze(t,"startNumber",nt,this.U)||1,this.ga=Ze(t,"media",rt,this.ga),this.Ja=Ze(t,"index",rt,this.Ja),this.qa=Ze(t,"initialization",rt,this.qa),this.ob=Ke(this,t,Qe)||this.ob},Qe.prototype.parse=function(e,t){this.ec=Je(this,t,He)},He.prototype.parse=function(e,t){this.startTime=Ze(t,"t",it),this.duration=Ze(t,"d",it),this.repeat=Ze(t,"r",it)},st.prototype.parse=function(e,t,n){e=null;try{e=this.Cc(t,n)}catch(i){if(!(i instanceof RangeError))throw i}return e},st.prototype.Cc=function(e,t){var n=new w(e,0),i=[],r=M(n);if(1936286840!=M(n))return null;1==r&&(r=P(n));var o=b(n);T(n,3),T(n,4);var a=M(n);if(0==a)return null;var s,l;for(0==o?(s=M(n),l=M(n)):(s=P(n),l=P(n)),T(n,2),o=n.i.getUint16(n.h,n.vc),n.h+=2,r=t+r+l,l=0;o>l;l++){var u=M(n),c=(2147483648&u)>>>31,u=2147483647&u,d=M(n);if(M(n),1==c)return null;i.push(new ot(l,s/a,(s+d)/a,r,r+u-1,this.eb)),s+=d,r+=u}return i},ut.prototype.length=function(){return this.g.length},ut.prototype.first=function(){if(0==this.g.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return this.g[0]},ut.prototype.get=function(e){if(0>e||e>=this.g.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.g[e]},ut.prototype.find=function(e){for(var t=0;t<this.g.length;t++)if(this.g[t].startTime>e)return t?t-1:0;return this.g.length-1},pt.prototype.parse=function(e,t){var n=null;try{n=this.Cc(e,t)}catch(i){if(!(i instanceof RangeError))throw i}return n},pt.prototype.Cc=function(e,t){var n,i=new k(e);if(440786851!=C(i).id)n=null;else if(n=C(i),408125543!=n.id)n=null;else{i=n.i.byteOffset,n=new k(n.i);for(var r=null;n.Ia();){var o=C(n);if(357149030==o.id){r=o;break}}if(r){for(n=new k(r.i),r=1e6;n.Ia();)if(o=C(n),2807729==o.id){r=R(o);break}n=r/1e9}else n=null;n=n?{le:i,re:n}:null}if(!n)return null;if(r=C(new k(t)),475249515!=r.id)return null;i=n.le,n=n.re;for(var r=new k(r.i),o=[],a=-1,s=-1,l=0;r.Ia();){var u=C(r);if(187==u.id){var c;if(c=new k(u.i),u=C(c),179!=u.id)c=null;else if(u=R(u),c=C(c),183!=c.id)c=null;else{c=new k(c.i);for(var d=0;c.Ia();){var h=C(c);if(241==h.id){d=R(h);break}}c={te:u,ge:d}}c&&(u=n*c.te,c=i+c.ge,a>=0&&(o.push(new ot(l,a,u,s,c-1,this.eb)),++l),a=u,s=c)}}return a>=0&&o.push(new ot(l,a,null,s,null,this.eb)),o},ui=gt.prototype,ui.$b=function(){if(this.o)return this.ta;if(0==this.url.lastIndexOf("data:",0)){var t=this.url.split(":")[1].split(";").pop().split(","),n=t.pop(),n="base64"==t.pop()?e.atob(n.replace(/-/g,"+").replace(/_/g,"/")):e.decodeURIComponent(n);return"arraybuffer"==this.n.responseType&&(n=Z(n).buffer),t=JSON.parse(JSON.stringify(new XMLHttpRequest)),t.response=n,t.responseText=n.toString(),n=this.ta,n.resolve(t),At(this),n}if(0==this.url.lastIndexOf("idb:",0))return vt(this);this.Pc++,this.od=Date.now(),this.Bb||(this.Bb=this.n.Qc),this.o=new XMLHttpRequest,t=this.url,this.J&&(t=new ve(t),t.Oa.add("_",Date.now()),t=t.toString()),this.o.open(this.n.method,t,!0),this.o.responseType=this.n.responseType,this.o.timeout=this.n.ie,this.o.withCredentials=this.n.withCredentials,this.o.onload=this.Pd.bind(this),this.n.qd&&(this.o.onreadystatechange=this.Ud.bind(this)),this.o.onerror=this.zc.bind(this);for(n in this.n.Dc)this.o.setRequestHeader(n,this.n.Dc[n]);return this.o.send(this.n.body),this.ta},ui.abort=function(){if(this.o&&this.o.readyState!=XMLHttpRequest.DONE){this.o.abort();var e=Et(this,"Request aborted.","aborted");this.ta.reject(e),At(this)}},ui.Pd=function(t){this.J&&this.J.sample(Date.now()-this.od,t.loaded),200<=this.o.status&&299>=this.o.status?(this.ta.resolve(this.o),At(this)):this.Pc<this.n.Sb?(yt(this),e.setTimeout(this.$b.bind(this),this.Bb*(1+(2*Math.random()-1)*this.n.ke)),this.Bb*=this.n.je):(t=Et(this,"HTTP error.","net"),this.ta.reject(t),At(this))},ui.Ud=function(){if(this.o.readyState==XMLHttpRequest.HEADERS_RECEIVED){var e=Date.parse(this.o.getResponseHeader("Date"));e&&(fi=e-Date.now())}},ui.zc=function(){var e=Et(this,"Network failure.","net");this.ta.reject(e),At(this)},n(wt,gt),wt.prototype.send=function(){var e=this.url;return this.$b().then(function(t){if(t=t.responseText,t=(new DOMParser).parseFromString(t,"text/xml")){var n={d:new ve(e)};t=Ke(n,t,ke)}else t=null;return t?Promise.resolve(t):(t=Error("MPD parse failure."),t.type="mpd",Promise.reject(t))})},n(bt,gt),bt.prototype.send=function(){return this.$b().then(function(e){return Promise.resolve(new Uint8Array(e.response))})},n(Mt,gt),Mt.prototype.send=function(){return this.$b().then(z(this,function(e){return Promise.resolve(e.response)}))};var Ti=1/60;ui=Pt.prototype,ui.p=function(){this.abort(),this.La=this.D=this.Na=null,this.j.p(),this.cd=this.ka=this.j=null},ui.Za=function(e,t,n){if(this.D)return n=Error("Cannot fetch: previous operation not complete."),n.type="stream",Promise.reject(n);this.D=new W,t&&this.D.append(function(){return[kt(this,t),this.ic.bind(this)]}.bind(this));var i=!0;if(e=e.zb,e.length){for(var r=e[0].url.toString(),o=1;o<e.length;++o)if(e[o].url.toString()!=r){i=!1;break}if(i)Tt(this,e,n);else for(o=0;o<e.length;++o)Tt(this,[e[o]],n)}return this.H()},ui.clear=function(){if(this.D){var e=Error("Cannot clear: previous operation not complete.");return e.type="stream",Promise.reject(e)}return this.D=new W,this.D.append(function(){var e;e:if(0==this.ka.buffered.length)Object.keys(this.La),e=Promise.resolve();else{try{this.ka.remove(0,Number.POSITIVE_INFINITY)}catch(t){e=Promise.reject(t);break e}this.La={},e=this.Na=new K}return[e,this.ic.bind(this)]}.bind(this)),this.H()},ui.reset=function(){this.La={}},ui.abort=function(){return this.D?this.D.abort():Promise.resolve()},ui.H=function(){return this.D.start(),this.D.Fb.then(function(){this.D=null}.bind(this))["catch"](function(e){return this.D=null,Promise.reject(e)}.bind(this))},ui.ic=function(){"open"==this.cd.readyState&&this.ka.abort()},ui.Zd=function(){this.Na.resolve(),this.Na=null};var ki=0;Ct.prototype.Sc=function(){return this.ca?Promise.resolve():this.ja.Za().then(z(this,function(e){return this.ca=e,Promise.resolve()}))},Dt.prototype.Za=function(){return new Mt(this.url.toString(),this.Ca,this.Ya).send()};var Ci=0;It.prototype.oc=function(){for(var e=[],t=0;t<this.Xa.length;++t){var n=new Bt;n.id=this.V,n.pa=this.Xa[t],n.contentType=this.contentType,n.xa=this.e.length?St(this.e[0]):"",e.push(n)}return e},Nt.prototype.oc=function(){for(var e=[],t=0;t<this.v.length;++t)e.push.apply(e,this.v[t].oc());return e},Ot.prototype.ib=function(e){this.b=new xt;for(var t=0;t<e.w.length;++t)for(var n=e.w[t],i=0;i<n.ua.length;++i){var r=n.ua[i];if("text"!=r.contentType)for(var o=0;o<r.S.length;++o){var a=r.S[o],s=0,s=s+(a.M?1:0),s=s+(a.I?1:0),s=s+(a.B?1:0);0==s?(r.S.splice(o,1),--o):1!=s&&(a.M?(a.I=null,a.B=null):a.I&&(a.B=null))}}for(Ft(e),t=0;t<e.w.length;++t)for(n=e.w[t],i=0;i<n.ua.length;++i){for(o=r=n.ua[i],a=null,s=0;s<o.S.length;++s){var l=o.S[s].l||"";
a?l!=a&&(o.S.splice(s,1),--s):a=l}0==r.S.length&&(n.ua.splice(i,1),--i)}for(this.b.$="dynamic"==e.type,this.b.Q=e.Q||5,t=0;t<e.w.length;++t){for(n=e.w[t],i=new Nt,i.id=n.id,i.start=n.start||0,i.duration=n.duration,r=0;r<n.ua.length;++r){for(o=n.ua[r],a=new It,a.id=o.id,a.vb=o.vb,a.contentType=o.contentType||"",a.lang=o.lang||"",l=s=0;l<o.S.length;++l){var u=o.S[l],c=a.Xa.slice(0),d=u,h=c,f=[];if(0==d.ma.length)f.push(re());else if(this.ab)for(var p=0;p<d.ma.length;++p){var g=this.ab(d.ma[p]);g&&f.push(g)}if(0==h.length)Array.prototype.push.apply(h,f);else for(d=0;d<h.length;++d){for(p=!1,g=0;g<f.length;++g)if(h[d].key()==f[g].key()){p=!0;break}p||(h.splice(d,1),--d)}if(!(0==c.length&&0<a.Xa.length)){if(h=e,f=n,d=u,u=new Ct,u.id=d.id,u.bandwidth=d.bandwidth,u.width=d.width,u.height=d.height,u.l=d.l||"",u.W=d.W||"",p=void 0,d.M)h=d.M,(h.ya||h.Qa&&h.Qa.R)&&h.d?(h.t&&(u.timestampOffset=-1*h.t/h.m),f=h.Qa,f||(f=new Be,f.url=new ve(h.d),f.R=h.ya?h.ya.clone():null),u.K=new ve(h.d),u.kb=Vt(f),u.ja=Vt(h.Z),p=!0):p=!1;else if(d.I)if(h=d.I,!h.A&&1<h.Ra.length)p=!1;else{u.ja=Vt(h.Z);for(var m=0,f=[],d=0;d<h.Ra.length;++d){var p=h.Ra[d],g=0==d?0:m,A=m=null,y=g/h.m;h.A&&(m=g+h.A,A=m/h.m);var v=0,E=null;p.cb&&(v=p.cb.rb,E=p.cb.end),f.push(new ot(g,y,A,v,E,new ve(p.K)))}u.f=new ut(f),p=!0}else d.B?(p=d.B,g=void 0,p=g=p.Ja?Ut(d,u):p.ob?Yt(this,h,f,d,u):p.A?Qt(h,f,d,u):!1):"text"==d.l.split("/")[0]&&(u.K=new ve(d.d),p=!0);(u=p?u:null)&&(a.e.push(u),a.Xa=c,u.f&&0<u.f.length()&&(s=Math.max(s,ct(u.f).endTime)))}}i.v.push(a),i.duration||(i.duration=s,"dynamic"==e.type&&(i.duration+=2592e3))}this.b.q.push(i)}},n(qt,G),ui=qt.prototype,ui.p=function(){this.parent=null;for(var e=0;e<this.lb.length;++e)this.lb[e].close()["catch"](function(){});this.lb=[],this.Ab=this.F=this.wb=null,this.j.p(),this.a=this.c=this.j=null},ui.vd=function(e,t,n){for(var i=n.keySystem,r=n.getConfiguration(),o=["audio","video"],a=0;a<o.length;++a){var s=o[a];if(!t.has(s)){var l=r[s+"Capabilities"];if(l&&l.length){for(var l=l[0],u=[],c=0;c<e.length;++c){var d=e[c];if(d.pa.keySystem==i&&d.xa==l.contentType){u.push(d),this.F=this.F?oe(this.F,d.pa):d.pa;break}}t.set(s,u)}}}return this.c.Gc(t),n.createMediaKeys()},ui.pe=function(e){return this.wb=e,this.a.setMediaKeys(this.wb).then(z(this,function(){if(0<this.c.Nb().length)zt(this);else{for(var e=0;e<this.F.Ka.length;++e){var t=this.F.Ka[e];this.gd({type:"encrypted",initDataType:t.initDataType,initData:t.initData})}0==this.F.Ka.length&&Y(this.j,this.a,"encrypted",this.gd.bind(this))}}))},ui.gd=function(e){var t=new Uint8Array(e.initData),n=Array.prototype.join.apply(t);if(!this.Ab[n]){try{var i=Xt(this)}catch(r){return i=N(r),this.dispatchEvent(i),void this.Ua.reject(r)}e=i.generateRequest(e.initDataType,e.initData),this.Ab[n]=!0,e["catch"](z(this,function(e){if(this.Ab){this.Ab[n]=!1;var t=N(e);this.dispatchEvent(t),this.Ua.reject(e)}})),this.lb.push(i)}},ui.Xd=function(e){Zt(this,e.target,this.F.ad,e.message,this.F.withCredentials,this.F.$c)},ui.Od=function(e){var t=e.target.keyStatuses.values();for(e=t.next();!e.done;e=t.next()){var n=Li[e.value];n&&(n=Error(n),n.type=e.value,e=N(n),this.dispatchEvent(e))}};var Li={"output-not-allowed":"The required output protection is not available.",expired:"A required key has expired and the content cannot be decrypted.","internal-error":"An unknown error has occurred in the CDM."};n($t,G);var _i=0;ui=$t.prototype,ui.p=function(){this.u=null,this.Fa(),this.X=this.C=this.yb=null,this.G.p(),this.parent=this.a=this.ka=this.G=null},ui.Wc=function(){return this.u!=_i&&1!=this.u},ui.qc=function(){return 4==this.u},ui.start=function(e,t){if(this.u==_i){this.C=e,this.Sa=e.l.split("/")[0],this.u=1,this.sb=Math.max(this.sb,t);var n,i=[_t(e),Lt(e)];Promise.all(i).then(z(this,function(){var i=dt(e.f,this.a.currentTime,t);return i?(n=i.zb[0].startTime,this.G.Za(i,e.ca,[404,410])):Promise.reject(Error("No segments available."))})).then(z(this,function(){var t=this.ka.buffered.start(0)-n;this.u=3,t=I({type:"started",bubbles:!1,sd:t}),this.dispatchEvent(t),en(this,e),tn(this)}))["catch"](z(this,function(e){"aborted"!=e.type&&(this.u=_i,e=N(e),this.dispatchEvent(e))}))}},ui.dc=function(e,t){if(r("switch"),r("switch logic"),this.u!=_i)if(1==this.u||2==this.u)this.yb=this.dc.bind(this,e,t);else if(e==this.C)this.ha();else{this.u=2,this.Fa();var n=[_t(e),Lt(e),this.G.abort()],i=this.a.paused;t&&this.a.pause(),Promise.all(n).then(z(this,function(){var n;if(t)n=this.a.currentTime;else{n=this.X.getBandwidth(),n=this.sb*e.bandwidth/n;var i=jt(this.G,this.a.currentTime);n=this.a.currentTime+Math.min(n,i-1)}return this.C=e,this.Sa=e.l.split("/")[0],this.G.reset(),(n=dt(e.f,n,this.sb))?(o("switch logic"),r("switch fetch"),this.G.Za(n,e.ca,[404,410])):Promise.reject(Error("No segments available."))})).then(z(this,function(){o("switch fetch"),t&&(this.a.currentTime-=.001,i||this.a.play()),en(this,e),this.u=3,tn(this)}))["catch"](z(this,function(e){"aborted"!=e.type&&(e=N(e),this.dispatchEvent(e),this.u=3,this.ha())}))}},ui.Ec=function(){this.u!=_i&&1!=this.u&&2!=this.u&&(this.Fa(),this.G.abort().then(z(this,function(){var e=this.a.currentTime,t=this.C.f.find(e);return 0>t?(rn(this),Promise.resolve()):(t=this.C.f.get(t),0<jt(this.G,e)&&this.G.La[t.id]?Promise.resolve():(this.xc=!0,this.G.clear()))})).then(z(this,function(){this.u=3,this.ha()}))["catch"](z(this,function(e){"aborted"!=e.type&&(e=N(e),this.dispatchEvent(e))})))},ui.bc=function(){},ui.pc=function(){return!0},ui.ha=function(){this.Fa();var t=this.a.currentTime;jt(this.G,t)>=this.sb?this.Hb=e.setTimeout(this.ha.bind(this),1e3):(t=nn(this,t),0>t||t>=this.C.f.length()?rn(this):(t=this.C.f.get(t),this.G.Za(new lt([t]),null,[]).then(z(this,function(){this.xc&&0<jt(this.G,this.a.currentTime)&&(this.xc=!1,this.a.currentTime+=.001),this.ha()}))["catch"](z(this,function(t){if("aborted"!=t.type){var n=N(t);this.dispatchEvent(n),n=[0,404,410],"net"==t.type&&-1!=n.indexOf(t.ue.status)&&(this.Hb=e.setTimeout(this.ha.bind(this),5e3))}}))))},ui.Fa=function(){this.Hb&&(e.clearTimeout(this.Hb),this.Hb=null)},n(on,G),ui=on.prototype,ui.p=function(){this.da&&this.a.removeChild(this.da),this.parent=this.a=this.C=this.da=null},ui.Wc=function(){return!0},ui.qc=function(){return!0},ui.start=function(e){this.C=e,e=this.pc(),this.da&&(this.bc(!1),this.a.removeChild(this.da)),this.da=document.createElement("track"),this.a.appendChild(this.da),this.da.src=this.C.K.toString(),this.bc(e)},ui.dc=function(e){this.start(e,0)},ui.Ec=function(){},ui.bc=function(e){this.da.track.mode=e?"showing":"disabled"},ui.pc=function(){return this.da?"showing"==this.da.track.mode:!1},n(dn,G),t("shaka.player.Player",dn),dn.version="v1.3.0-23-ga93a5c6",dn.isBrowserSupported=function(){return!!(e.MediaSource&&e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration&&e.Promise&&HTMLVideoElement.prototype.getVideoPlaybackQuality&&Element.prototype.requestFullscreen&&document.exitFullscreen&&"fullscreenElement"in document&&document.body.children)},dn.isTypeSupported=hn,dn.prototype.p=function(){this.Kc()["catch"](function(){}),this.j.p(),this.a=this.j=null},dn.prototype.destroy=dn.prototype.p,dn.prototype.Kc=function(){if(!this.c)return Promise.resolve();this.Wa&&mn(this),this.a.pause(),Q(this.j),gn(this),fn(this),this.Ga.p(),this.Ga=null,this.a.src="";var e=this.a.setMediaKeys(null);return this.c&&(this.c.p(),this.c=null),this.Wa=!1,this.N=new an,e},dn.prototype.unload=dn.prototype.Kc,dn.prototype.load=function(e){var t=this.Kc();return this.a.autoplay&&(r("load"),Y(this.j,this.a,"timeupdate",this.Nd.bind(this))),e.tb(this.jc),t.then(z(this,function(){return e.load(this.ra)})).then(z(this,function(){return this.c=e,this.c.mb(this.Ub),this.Ga=new qt(this,this.a,this.c),Kt(this.Ga)})).then(z(this,function(){return Y(this.j,this.a,"error",this.zc.bind(this)),Y(this.j,this.a,"playing",this.Td.bind(this)),Y(this.j,this.a,"pause",this.Rd.bind(this)),this.c.Oc(this,this.a)})).then(z(this,function(){pn(this)}))["catch"](z(this,function(t){e.p(),this.c=null,this.Ga&&(this.Ga.p(),this.Ga=null);var n=N(t);return this.dispatchEvent(n),Promise.reject(t)}))},dn.prototype.load=dn.prototype.load,ui=dn.prototype,ui.Nd=function(){o("load"),this.N.playbackLatency=a("load")/1e3,this.j.Gb(this.a,"timeupdate")},ui.zc=function(e){this.a.error&&(e=this.a.error.code,e!=MediaError.MEDIA_ERR_ABORTED&&(e=Error(Ri[e]||"Unknown playback error."),e.type="playback",e=N(e),this.dispatchEvent(e)))},ui.Td=function(){r("playing"),this.Wa&&mn(this)},ui.Rd=function(){o("playing"),sn(this.N)},ui.getStats=function(){this.a.paused||(o("playing"),sn(this.N),r("playing"));var e=this.N,t=this.a.getVideoPlaybackQuality();return t&&(e.decodedFrames=t.totalVideoFrames,e.droppedFrames=t.droppedVideoFrames),this.N},dn.prototype.getStats=dn.prototype.getStats,dn.prototype.Ad=function(){var e=this.a.videoWidth,t=this.a.videoHeight;return e&&t?{width:e,height:t}:null},dn.prototype.getCurrentResolution=dn.prototype.Ad,dn.prototype.getVideoTracks=function(){return this.c?this.c.getVideoTracks():[]},dn.prototype.getVideoTracks=dn.prototype.getVideoTracks,dn.prototype.getAudioTracks=function(){return this.c?this.c.getAudioTracks():[]},dn.prototype.getAudioTracks=dn.prototype.getAudioTracks,dn.prototype.Ob=function(){return this.c?this.c.Ob():[]},dn.prototype.getTextTracks=dn.prototype.Ob,dn.prototype.Cb=function(e,t){return this.c?this.c.Cb(e,void 0==t?!0:t):!1},dn.prototype.selectVideoTrack=dn.prototype.Cb,dn.prototype.Yb=function(e){return this.c?this.c.Yb(e,!1):!1},dn.prototype.selectAudioTrack=dn.prototype.Yb,dn.prototype.Zb=function(e){return this.c?this.c.Zb(e,!1):!1},dn.prototype.selectTextTrack=dn.prototype.Zb,dn.prototype.ub=function(e){this.c&&this.c.ub(e)},dn.prototype.enableTextTrack=dn.prototype.ub,dn.prototype.tb=function(e){this.jc=e,this.c&&this.c.tb(e)},dn.prototype.enableAdaptation=dn.prototype.tb,dn.prototype.zd=function(){return this.jc},dn.prototype.getAdaptationEnabled=dn.prototype.zd,dn.prototype.Bd=function(){return this.a.currentTime},dn.prototype.getCurrentTime=dn.prototype.Bd,dn.prototype.Cd=function(){return this.a.duration},dn.prototype.getDuration=dn.prototype.Cd,dn.prototype.Dd=function(){return this.a.muted},dn.prototype.getMuted=dn.prototype.Dd,dn.prototype.Fd=function(){return this.a.volume},dn.prototype.getVolume=dn.prototype.Fd,dn.prototype.play=function(){this.md(1),this.a.play()},dn.prototype.play=dn.prototype.play,dn.prototype.pause=function(){this.a.pause()},dn.prototype.pause=dn.prototype.pause,dn.prototype.requestFullscreen=function(){this.a.requestFullscreen()},dn.prototype.requestFullscreen=dn.prototype.requestFullscreen,dn.prototype.seek=function(e){this.a.currentTime=e},dn.prototype.seek=dn.prototype.seek,dn.prototype.me=function(e){this.a.muted=e},dn.prototype.setMuted=dn.prototype.me,dn.prototype.oe=function(e){this.a.volume=e},dn.prototype.setVolume=dn.prototype.oe,dn.prototype.ne=function(e){this.ra=B(e)},dn.prototype.setPreferredLanguage=dn.prototype.ne,dn.prototype.md=function(e){fn(this),e>=0?this.a.playbackRate=e:(this.a.playbackRate=0,this.hd(this.a.currentTime,Date.now(),e))},dn.prototype.setPlaybackRate=dn.prototype.md,dn.prototype.mb=function(e){if(!(e instanceof ie))throw new TypeError("Argument must be a Restrictions instance.");this.Ub=e.clone(),this.c&&this.c.mb(this.Ub)},dn.prototype.setRestrictions=dn.prototype.mb,dn.prototype.Ed=function(){return this.Ub.clone()},dn.prototype.getRestrictions=dn.prototype.Ed,dn.prototype.Pb=function(){return this.c?this.c.Pb():!1},dn.prototype.isLive=dn.prototype.Pb,dn.prototype.hd=function(t,n,i){this.a.currentTime=t+(Date.now()-n)/1e3*i,this.Vb=e.setTimeout(this.hd.bind(this,t,n,i),100)},dn.prototype.be=function(){if(pn(this),!this.a.ended&&!this.a.seeking){var e=this.a.buffered,t=e.length?e.end(e.length-1):0,e=t-this.a.currentTime,t=t+.05;this.Wa?e>this.c.Uc()&&(mn(this),this.a.play()):t<this.a.duration&&.1>e&&!this.a.paused&&(this.Wa=!0,this.a.pause(),this.N.bufferingHistory.push((Date.now()+fi)/1e3),r("buffering"),this.dispatchEvent(I({type:"bufferingStart"})))}};var Ri={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};An.prototype.ib=function(e){for(var t=0;t<e.length;++t)for(var n=e[t],i=0;i<n.v.length;++i){for(var r=n.v[i],o=r,a=0;a<o.e.length;++a)hn(St(o.e[a]))||(o.e.splice(a,1),--a);0==r.e.length&&(n.v.splice(i,1),--i)}for(t=0;t<e.length;++t)for(n=e[t],i=0;i<n.v.length;++i)n.v[i].e.sort(yn)},ui=vn.prototype,ui.p=function(){this.j.p(),this.c=this.X=this.j=null},ui.start=function(){this.gb=Date.now()+4e3,Y(this.j,this.X,"bandwidth",this.yc.bind(this)),Y(this.j,this.c,"adaptation",this.Md.bind(this))},ui.enable=function(e){this.Rc=e},ui.yc=function(){if(this.Rc&&!(Date.now()<this.gb)){var e=En(this);if(e){if(e.active)return void(this.gb=Date.now()+3e3);this.c.Cb(e.id,!1)}this.gb=Number.POSITIVE_INFINITY}},ui.Md=function(){this.gb==Number.POSITIVE_INFINITY&&(this.gb=Date.now()+3e4)},n(wn,G),t("shaka.player.HttpVideoSource",wn),ui=wn.prototype,ui.p=function(){this.la&&(this.la.parentElement.removeChild(this.la),this.la=null),this.parent=this.F=null},ui.Oc=function(e,t){this.parent=e;var n=t.mediaKeys;return t.src=this.eb,n=t.setMediaKeys(n),this.rd&&(this.la=document.createElement("track"),this.la.src=this.rd,t.appendChild(this.la),this.la.track.mode="showing"),n},ui.load=function(){return Promise.resolve()},ui.getVideoTracks=function(){return[]},ui.getAudioTracks=function(){return[]},ui.Ob=function(){return[]},ui.Uc=function(){return 5},ui.Tc=function(){var e=new Bt;return e.pa=this.F,[e]},ui.Gc=function(){},ui.Cb=function(){return!1},ui.Yb=function(){return!1},ui.Zb=function(){return!1},ui.ub=function(e){this.la&&(this.la.track.mode=e?"showing":"disabled")},ui.tb=function(){},ui.mb=function(){},ui.Nb=function(){return[]},ui.Qb=function(){return!1},ui.Pb=function(){return!1},n(bn,G),t("shaka.player.StreamVideoSource",bn),ui=bn.prototype,ui.p=function(){this.H&&(this.H.abort(),this.H=null),this.fa.p(),this.fa=null,this.qb.p(),this.qb=null,In(this),this.parent=this.J=this.Jb=this.video=this.ba=this.Lb=this.s=null},ui.Oc=function(t,n){if(!this.b||0==this.b.q.length){var i=Error("Manifest has not been loaded.");return i.type="stream",Promise.reject(i)}return this.parent=t,this.video=n,this.N=t.getStats(),Y(this.fa,this.ba,"sourceopen",this.Qd.bind(this)),Y(this.fa,this.J,"bandwidth",this.yc.bind(this)),i=this.video.mediaKeys,this.video.src=e.URL.createObjectURL(this.ba),i=this.video.setMediaKeys(i),Promise.all([this.Jb,i])},ui.load=function(e){return this.b&&0!=this.b.q.length?(this.ra=e,(new An).ib(this.b.q),0==this.b.q.length||0==this.b.q[0].v.length?(e=Error("The manifest specifies content that cannot be displayed on this browser/platform."),e.type="stream",Promise.reject(e)):Promise.resolve()):(e=Error("The manifest contains no stream information."),e.type="stream",Promise.reject(e))},ui.getVideoTracks=function(){if(!this.r.has("video"))return[];for(var e=this.s.video,e=(e=e?e.C:null)?e.V:0,t=[],n=this.r.get("video"),i=0;i<n.length;++i)for(var r=n[i],o=0;o<r.e.length;++o){var a=r.e[o];if(a.enabled){var s=a.V,a=new u(s,a.bandwidth,a.width,a.height);s==e&&(a.active=!0),t.push(a)}}return t},ui.getAudioTracks=function(){if(!this.r.has("audio"))return[];for(var e=this.s.audio,e=(e=e?e.C:null)?e.V:0,t=[],n=this.r.get("audio"),i=0;i<n.length;++i)for(var r=n[i],o=r.lang,a=0;a<r.e.length;++a){var l=r.e[a],u=l.V,l=new s(u,l.bandwidth,o);u==e&&(l.active=!0),t.push(l)}return t},ui.Ob=function(){if(!this.r.has("text"))return[];for(var e=this.s.text,t=e?e.C:null,t=t?t.V:0,n=[],i=this.r.get("text"),r=0;r<i.length;++r)for(var o=i[r],a=o.lang,s=0;s<o.e.length;++s){var u=o.e[s].V,c=new l(u,a);u==t&&(c.active=!0,c.enabled=e.pc()),n.push(c)}return n},ui.Uc=function(){return this.b.Q||0},ui.Tc=function(){return 0==this.b.q.length?[]:this.b.q[0].oc()},ui.Gc=function(e){for(var t={},n=this.b.q[0],i=0;i<n.v.length;++i){var r=n.v[i];t[r.V]=r}for(this.r.clear(),n=e.keys(),i=0;i<n.length;++i){var r=n[i],o=e.get(r);if("video"==r){var a=o[0].id;this.r.push(r,t[a])}else if("audio"==r)for(var a=o[0].xa.split(";")[0],s=0;s<o.length;++s){var l=o[s];l.xa.split(";")[0]==a&&this.r.push(r,t[l.id])}else for(s=0;s<o.length;++s)a=o[s].id,this.r.push(r,t[a])}this.cc=!0,(e=this.r.get("audio"))&&(Ln(this,e),this.r.set("audio",e),e=e[0].lang||this.ra,x(2,this.ra,e)&&(this.cc=!1)),(e=this.r.get("text"))&&(Ln(this,e),this.r.set("text",e),e=e[0].lang||this.ra,x(2,this.ra,e)||(this.cc=!1))},ui.Cb=function(e,t){return Cn(this,"video",e,t)},ui.Yb=function(e,t){return Cn(this,"audio",e,t)},ui.Zb=function(e,t){return Cn(this,"text",e,t)},ui.ub=function(e){var t=this.s.text;t&&t.bc(e)},ui.tb=function(e){this.qb.enable(e)},ui.mb=function(e){this.Lb=e;for(var t=0;t<this.b.q.length;++t)for(var n=this.b.q[t],i=0;i<n.v.length;++i)for(var r=n.v[i],o=0;o<r.e.length;++o){var a=r.e[o];a.enabled=!0,e.maxWidth&&a.width>e.maxWidth&&(a.enabled=!1),e.maxHeight&&a.height>e.maxHeight&&(a.enabled=!1),e.maxBandwidth&&a.bandwidth>e.maxBandwidth&&(a.enabled=!1),e.minBandwidth&&a.bandwidth<e.minBandwidth&&(a.enabled=!1)}},ui.Nb=function(){return[]},ui.Qb=function(){return!1},ui.Pb=function(){return this.b?this.b.$:!1},ui.Qd=function(){this.fa.Gb(this.ba,"sourceopen"),_n(this).then(z(this,function(){this.Jb.resolve()}))["catch"](z(this,function(e){this.Jb.reject(e)}))},ui.jd=function(){},ui.ae=function(e){this.wc=Math.min(this.wc,e.sd),this.bb=Math.max(this.bb,e.sd);for(var t in this.s)if(!this.s[t].Wc())return;if(0<=this.wc*this.bb)for(e=F(this.r),t=0;t<e.length;++t){var n=e[t];if("text"!=n.contentType)for(var i=0;i<n.e.length;++i){var r=n.e[i],o=r.f;if(o){var a=this.bb;o.pb+=a,o.g=ht(o.g,a),ft(o)}null!=r.na&&(r.na+=this.bb)}}this.Ac()},ui.Ac=function(){this.video.currentTime+=this.bb,this.video.playbackRate=this.Bc;var e=function(){this.video.removeEventListener("seeking",e),Y(this.fa,this.video,"seeking",this.Wd.bind(this))}.bind(this);this.video.addEventListener("seeking",e)},ui.$d=function(){if(!this.b.$){for(var e in this.s)if(!this.s[e].qc())return;"open"==this.ba.readyState&&this.ba.endOfStream()}},ui.Wd=function(){this.Tb()},ui.Tb=function(){for(var e in this.s)this.s[e].Ec()},ui.yc=function(){var e=this.N,t=this.J.getBandwidth();e.estimatedBandwidth=t,e.bandwidthHistory.push(new cn(t))},n(Nn,bn),t("shaka.player.DashVideoSource",Nn),ui=Nn.prototype,ui.p=function(){this.Fa(),Un(this),this.tc=this.ab=null,bn.prototype.p.call(this)},ui.load=function(e){return this.Rb=Date.now()/1e3,new wt(this.dd).send().then(z(this,function(t){var n=new Ot(this.ab);return n.ib(t),this.fb=t,this.fc=t.nb||0,this.b=n.b,t=bn.prototype.load.call(this,e),this.b.$&&t.then(z(this,function(){Yn(this),xn(this)})),t}))},ui.jd=function(){var e=Dn(this);e&&(this.sc=this.b.$?Math.max(e.end-this.fc,e.start):e.start,this.rc=e.end,this.L=this.sc,this.T=this.rc,this.b.$&&(Bn(this),Fn(this)))},ui.Ac=function(){var e=Dn(this);if(e){var t=this.T-this.rc;this.L=e.start+(this.L-this.sc),this.T=e.end+t}bn.prototype.Ac.call(this),this.Hc=!0,On(this),Y(this.fa,this.video,"play",this.Sd.bind(this))},ui.Tb=function(){var e=this.video.currentTime;e>=this.L-.01&&e<=this.T+.01?bn.prototype.Tb.call(this):this.video.currentTime=e<this.L?this.L:this.T},ui.Sd=function(){this.Tb()},ui.ha=function(){this.Fa(),this.Rb=Date.now()/1e3,(null==this.fb.xb?Promise.resolve():new wt(this.dd).send().then(z(this,function(e){this.fb=e}))).then(z(this,function(){var e=new Ot(this.ab);if(e.ib(this.fb),this.fc=this.fb.nb||0,e=e.b,this.b&&0!=this.b.q.length){if(this.b.Q=e.Q,(new An).ib(e.q),Mn(this,e),this.Lb&&this.mb(this.Lb),this.video&&!this.H)if(0==Object.keys(this.s).length)_n(this);else if(this.b.$)for(var t in this.s)e=this.s[t],e.qc()&&e.Ec()}else t=Error("Manifest has not been loaded."),t.type="stream",t=N(t),this.dispatchEvent(t);for(t=0;t<this.b.q.length;++t)for(var e=this.b.q[t],n=0;n<e.v.length;++n)for(var i=e.v[n],r=0;r<i.e.length;++r){var o=i.e[r];if(o.f){o.f.length();var a=o.f,s=this.L;0!=a.g.length&&(ct(a).endTime<=s?a.g=[]:(s=a.find(s),a.g=a.g.slice(s))),o.f.length()}}Yn(this),xn(this),Bn(this)}))["catch"](z(this,function(e){e=N(e),this.dispatchEvent(e),xn(this),Bn(this)}))},ui.Vd=function(e){Un(this),e=(Date.now()-e)/1e3,this.T-this.L+e>=this.fc&&(this.L+=e),this.Hc?this.T+=e:1>=this.T-this.L&&(this.T=this.L+1),null!=this.Jc&&this.T>=this.Jc&&(e=Date.now()/1e3-this.Rb,null!=this.Ib&&e>=3&&this.ha()),this.Hc&&On(this),Fn(this)},ui.Fa=function(){this.Ib&&(e.clearTimeout(this.Ib),this.Ib=null)},n(Qn,G),ui=Qn.prototype,ui.Hd=function(e,t){var n=new K,i={stream_id:t.Eb,mime_type:e.l,codecs:e.W,init_segment:e.ca,references:t.zb},r=ii(this).put(i);return r.onsuccess=function(){n.resolve(t.Eb)},r.onerror=function(){n.reject(r.error)},n},ui.Gd=function(e,t){for(var n=e.f,i=Promise.resolve(),r=0;r<n.length();++r)var o=n.get(r),a=this.ud.bind(this,o,t),i=i.then(this.he.bind(this,o)),i=i.then(a);return i.then(function(){return Promise.resolve(t)})["catch"](z(this,function(e){return ti(this,t.Eb),Promise.reject(e)}))},ui.ud=function(e,t,n){var i=new K;0==t.jb.byteLength&&(t.nc=e),t.jb=Jn(t.jb,n),t.kd++;var r=I({type:"progress",detail:t.kd/t.se*100,bubbles:!0});if(1048576<=t.jb.byteLength||null==e.endTime){n={stream_id:t.Eb,segment_id:t.Xb,content:t.jb};var o=ni(this).put(n);t.zb.push({index:t.Xb,start_time:t.nc.startTime,start_byte:t.nc.Ca,end_time:e.endTime,url:"idb://"+t.Eb+"/"+t.Xb}),t.Xb++,t.jb=new ArrayBuffer(0),o.onerror=function(){i.reject(o.error)},o.onsuccess=z(this,function(){this.dispatchEvent(r),i.resolve()})}else this.dispatchEvent(r),i.resolve();return i},ui.he=function(e){return e=new Mt(e.url.toString(),e.Ca,e.Ya),e.J=this.X,e.send()},ui.kc=function(e){return Zn(this,e).then(z(this,function(t){var n,i=[];for(n in t.stream_ids)i.push(ti(this,t.stream_ids[n]));return t=ri(this),i.push(t["delete"](e)),Promise.all(i)}))},n(ai,bn),t("shaka.player.OfflineVideoSource",ai),ai.retrieveGroupIds=function(){var e=new Qn(null,null),t=Hn(e).then(function(){return $n(e)});return t.then(function(){Gn(e)})["catch"](function(){Gn(e)}),t},ai.prototype.qe=function(t,n,i,r){var o,a,s;t=new wt(t);var l=B(n);return t.send().then(z(this,function(e){var t=new Ot(i);return t.ib(e),this.b=t.b,this.b.$?Promise.reject(Error("Unable to store live streams offline.")):bn.prototype.load.call(this,l)})).then(z(this,function(){var t=document.createElement("video");return t.src=e.URL.createObjectURL(this.ba),o=new qt(null,t,this),Y(this.fa,o,"sessionReady",this.Yd.bind(this)),Kt(o)})).then(z(this,function(){s={};for(var e=F(this.r),t=0;t<e.length;++t)for(var n=e[t],i=0;i<n.e.length;++i){var o=n.e[i];s[o.V]=o}return r()})).then(z(this,function(e){a=[];for(var t=0;t<e.length;++t){var n=e[t],i=s[n];if(!i)return Promise.reject(Error("Invalid stream ID chosen: "+n));a.push(i)}for(e=[],t=0;t<a.length;++t)e.push(Lt(a[t]));return Promise.all(e)})).then(z(this,function(){var e=["audio","video"];return a=a.filter(function(t){return 0>e.indexOf(t.l.split("/")[0])?!1:!0}),si(this,a)})).then(z(this,function(){return Wt(o,this.timeoutMs)})).then(z(this,function(){return li(this,a,o.F,this.b.q[0].duration)}))},ai.prototype.store=ai.prototype.qe,ai.prototype.Yd=function(e){this.ac.push(e.detail.sessionId)},ai.prototype.load=function(e){var t,n,i=new Qn(null,null);return Hn(i).then(z(this,function(){return Zn(i,this.Vc)})).then(z(this,function(e){var r=[];this.ac=e.session_ids,t=e.duration,n=e.key_system;for(var o=0;o<e.stream_ids.length;++o)r.push(Xn(i,e.stream_ids[o]));return Promise.all(r)})).then(z(this,function(i){var r=t,o=n,a=new xt;a.Q=5;for(var s=new Nt,l=0;l<i.length;++l){for(var u=i[l],c=[],d=0;d<u.references.length;d++){var h=u.references[d],h=new ot(h.index,h.start_time,h.end_time,h.start_byte,null,new ve(h.url));c.push(h)}d=new Ct,c=new ut(c),d.f=c,d.l=u.mime_type,d.W=u.codecs,d.ca=u.init_segment,u=new ne(o,"",!1,null,null),c=new It,c.e.push(d),c.Xa.push(u),c.contentType=d.l.split("/")[0],s.v.push(c),s.duration=r}return a.q.push(s),this.b=a,bn.prototype.load.call(this,e)})).then(function(){return Gn(i),Promise.resolve()})["catch"](function(e){return Gn(i),Promise.reject(e)})},ai.prototype.kc=function(){var e=new Qn(null,null);return Hn(e).then(e.kc.bind(e,this.Vc)).then(function(){return Gn(e),Promise.resolve()})["catch"](function(t){return Gn(e),Promise.reject(t)})},ai.prototype.deleteGroup=ai.prototype.kc,ai.prototype.Nb=function(){return this.ac},ai.prototype.Qb=function(){return!0}}).bind(r,this)(),"undefined"!=typeof e&&e.exports?e.exports=r.shaka:(i=function(){return r.shaka}.call(t,n,t,e),!(void 0!==i&&(e.exports=i)))}()}});